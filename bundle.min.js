!function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var r=e[s][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(){},{}],2:[function(t,e,r){function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);var i,o=typeof t;if("number"===o)i=t>0?t>>>0:0;else if("string"===o)i=n.byteLength(t,e);else{if("object"!==o||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&B(t.data)&&(t=t.data),i=+t.length>0?Math.floor(+t.length):0}if(i>P)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+P.toString(16)+" bytes");var s;n.TYPED_ARRAY_SUPPORT?s=n._augment(new Uint8Array(i)):(s=this,s.length=i,s._isBuffer=!0);var a;if(n.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)s._set(t);else if(N(t))if(n.isBuffer(t))for(a=0;i>a;a++)s[a]=t.readUInt8(a);else for(a=0;i>a;a++)s[a]=(t[a]%256+256)%256;else if("string"===o)s.write(t,0,e);else if("number"===o&&!n.TYPED_ARRAY_SUPPORT&&!r)for(a=0;i>a;a++)s[a]=0;return i>0&&i<=n.poolSize&&(s.parent=j),s}function i(t,e,r){if(!(this instanceof i))return new i(t,e,r);var o=new n(t,e,r);return delete o.parent,o}function o(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))throw new Error("Invalid hex string");t[r+s]=a}return s}function s(t,e,r,n){var i=k(_(e,t.length-r),t,r,n);return i}function a(t,e,r,n){var i=k(L(e),t,r,n);return i}function u(t,e,r,n){return a(t,e,r,n)}function h(t,e,r,n){var i=k(J(e),t,r,n);return i}function c(t,e,r,n){var i=k(A(e,t.length-r),t,r,n,2);return i}function f(t,e,r){return T.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function p(t,e,r){var n="",i="";r=Math.min(t.length,r);for(var o=e;r>o;o++)t[o]<=127?(n+=R(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return n+R(i)}function l(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(127&t[i]);return n}function d(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(t[i]);return n}function m(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=e;r>o;o++)i+=C(t[o]);return i}function g(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function y(t,e,r){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function x(t,e,r,i,o,s){if(!n.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||s>e)throw new RangeError("value is out of bounds");if(r+i>t.length)throw new RangeError("index out of range")}function v(t,e,r,n){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);o>i;i++)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function w(t,e,r,n){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);o>i;i++)t[r+i]=e>>>8*(n?i:3-i)&255}function b(t,e,r,n,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(r+n>t.length)throw new RangeError("index out of range");if(0>r)throw new RangeError("index out of range")}function S(t,e,r,n,i){return i||b(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),M.write(t,e,r,n,23,4),r+4}function E(t,e,r,n,i){return i||b(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),M.write(t,e,r,n,52,8),r+8}function O(t){if(t=I(t).replace(U,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function I(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function N(t){return B(t)||n.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function C(t){return 16>t?"0"+t.toString(16):t.toString(16)}function _(t,e){var r,n=t.length,i=null;e=e||1/0;for(var o=[],s=0;n>s;s++){if(r=t.charCodeAt(s),r>55295&&57344>r){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(56320>r){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&((e-=3)>-1&&o.push(239,191,189),i=null);if(128>r){if((e-=1)<0)break;o.push(r)}else if(2048>r){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(65536>r){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(2097152>r))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function L(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function A(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);s++)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function J(t){return T.toByteArray(O(t))}function k(t,e,r,n,i){i&&(n-=n%i);for(var o=0;n>o&&!(o+r>=e.length||o>=t.length);o++)e[o+r]=t[o];return o}function R(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var T=t("base64-js"),M=t("ieee754"),B=t("is-array");r.Buffer=n,r.SlowBuffer=i,r.INSPECT_MAX_BYTES=50,n.poolSize=8192;var P=1073741823,j={};n.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(r){return!1}}(),n.isBuffer=function(t){return!(null==t||!t._isBuffer)},n.compare=function(t,e){if(!n.isBuffer(t)||!n.isBuffer(e))throw new TypeError("Arguments must be Buffers");for(var r=t.length,i=e.length,o=0,s=Math.min(r,i);s>o&&t[o]===e[o];o++);return o!==s&&(r=t[o],i=e[o]),i>r?-1:r>i?1:0},n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.concat=function(t,e){if(!B(t))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===t.length)return new n(0);if(1===t.length)return t[0];var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var i=new n(e),o=0;for(r=0;r<t.length;r++){var s=t[r];s.copy(i,o),o+=s.length}return i},n.byteLength=function(t,e){var r;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":r=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;case"hex":r=t.length>>>1;break;case"utf8":case"utf-8":r=_(t).length;break;case"base64":r=J(t).length;break;default:r=t.length}return r},n.prototype.length=void 0,n.prototype.parent=void 0,n.prototype.toString=function(t,e,r){var n=!1;if(e>>>=0,r=void 0===r||1/0===r?this.length:r>>>0,t||(t="utf8"),0>e&&(e=0),r>this.length&&(r=this.length),e>=r)return"";for(;;)switch(t){case"hex":return m(this,e,r);case"utf8":case"utf-8":return p(this,e,r);case"ascii":return l(this,e,r);case"binary":return d(this,e,r);case"base64":return f(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return g(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}},n.prototype.equals=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return 0===n.compare(this,t)},n.prototype.inspect=function(){var t="",e=r.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},n.prototype.compare=function(t){if(!n.isBuffer(t))throw new TypeError("Argument must be a Buffer");return n.compare(this,t)},n.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},n.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},n.prototype.write=function(t,e,r,n){if(isFinite(e))isFinite(r)||(n=r,r=void 0);else{var i=n;n=e,e=r,r=i}if(e=Number(e)||0,0>r||0>e||e>this.length)throw new RangeError("attempt to write outside buffer bounds");var f=this.length-e;r?(r=Number(r),r>f&&(r=f)):r=f,n=String(n||"utf8").toLowerCase();var p;switch(n){case"hex":p=o(this,t,e,r);break;case"utf8":case"utf-8":p=s(this,t,e,r);break;case"ascii":p=a(this,t,e,r);break;case"binary":p=u(this,t,e,r);break;case"base64":p=h(this,t,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":p=c(this,t,e,r);break;default:throw new TypeError("Unknown encoding: "+n)}return p},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,0>t?(t+=r,0>t&&(t=0)):t>r&&(t=r),0>e?(e+=r,0>e&&(e=0)):e>r&&(e=r),t>e&&(e=t);var i;if(n.TYPED_ARRAY_SUPPORT)i=n._augment(this.subarray(t,e));else{var o=e-t;i=new n(o,void 0,!0);for(var s=0;o>s;s++)i[s]=this[s+t]}return i.length&&(i.parent=this.parent||this),i},n.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||y(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},n.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||y(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},n.prototype.readUInt8=function(t,e){return e||y(t,1,this.length),this[t]},n.prototype.readUInt16LE=function(t,e){return e||y(t,2,this.length),this[t]|this[t+1]<<8},n.prototype.readUInt16BE=function(t,e){return e||y(t,2,this.length),this[t]<<8|this[t+1]},n.prototype.readUInt32LE=function(t,e){return e||y(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},n.prototype.readUInt32BE=function(t,e){return e||y(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},n.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||y(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},n.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||y(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},n.prototype.readInt8=function(t,e){return e||y(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},n.prototype.readInt16LE=function(t,e){e||y(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt16BE=function(t,e){e||y(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},n.prototype.readInt32LE=function(t,e){return e||y(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},n.prototype.readInt32BE=function(t,e){return e||y(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},n.prototype.readFloatLE=function(t,e){return e||y(t,4,this.length),M.read(this,t,!0,23,4)},n.prototype.readFloatBE=function(t,e){return e||y(t,4,this.length),M.read(this,t,!1,23,4)},n.prototype.readDoubleLE=function(t,e){return e||y(t,8,this.length),M.read(this,t,!0,52,8)},n.prototype.readDoubleBE=function(t,e){return e||y(t,8,this.length),M.read(this,t,!1,52,8)},n.prototype.writeUIntLE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||x(this,t,e,r,Math.pow(2,8*r),0);var i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i>>>0&255;return e+r},n.prototype.writeUIntBE=function(t,e,r,n){t=+t,e>>>=0,r>>>=0,n||x(this,t,e,r,Math.pow(2,8*r),0);var i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o>>>0&255;return e+r},n.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,1,255,0),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},n.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):v(this,t,e,!0),e+2},n.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,2,65535,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):v(this,t,e,!1),e+2},n.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):w(this,t,e,!0),e+4},n.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,4,4294967295,0),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):w(this,t,e,!1),e+4},n.prototype.writeIntLE=function(t,e,r,n){t=+t,e>>>=0,n||x(this,t,e,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var i=0,o=1,s=0>t?1:0;for(this[e]=255&t;++i<r&&(o*=256);)this[e+i]=(t/o>>0)-s&255;return e+r},n.prototype.writeIntBE=function(t,e,r,n){t=+t,e>>>=0,n||x(this,t,e,r,Math.pow(2,8*r-1)-1,-Math.pow(2,8*r-1));var i=r-1,o=1,s=0>t?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-s&255;return e+r},n.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,1,127,-128),n.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},n.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):v(this,t,e,!0),e+2},n.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,2,32767,-32768),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):v(this,t,e,!1),e+2},n.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,4,2147483647,-2147483648),n.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):w(this,t,e,!0),e+4},n.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||x(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),n.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):w(this,t,e,!1),e+4},n.prototype.writeFloatLE=function(t,e,r){return S(this,t,e,!0,r)},n.prototype.writeFloatBE=function(t,e,r){return S(this,t,e,!1,r)},n.prototype.writeDoubleLE=function(t,e,r){return E(this,t,e,!0,r)},n.prototype.writeDoubleBE=function(t,e,r){return E(this,t,e,!1,r)},n.prototype.copy=function(t,e,r,i){var o=this;if(r||(r=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&r>i&&(i=r),i===r)return 0;if(0===t.length||0===o.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>r||r>=o.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var s=i-r;if(1e3>s||!n.TYPED_ARRAY_SUPPORT)for(var a=0;s>a;a++)t[a+e]=this[a+r];else t._set(this.subarray(r,r+s),e);return s},n.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),e>r)throw new RangeError("end < start");if(r!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>r||r>this.length)throw new RangeError("end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var i=_(t.toString()),o=i.length;for(n=e;r>n;n++)this[n]=i[n%o]}return this}},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n.TYPED_ARRAY_SUPPORT)return new n(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var D=n.prototype;n._augment=function(t){return t.constructor=n,t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=D.get,t.set=D.set,t.write=D.write,t.toString=D.toString,t.toLocaleString=D.toString,t.toJSON=D.toJSON,t.equals=D.equals,t.compare=D.compare,t.copy=D.copy,t.slice=D.slice,t.readUIntLE=D.readUIntLE,t.readUIntBE=D.readUIntBE,t.readUInt8=D.readUInt8,t.readUInt16LE=D.readUInt16LE,t.readUInt16BE=D.readUInt16BE,t.readUInt32LE=D.readUInt32LE,t.readUInt32BE=D.readUInt32BE,t.readIntLE=D.readIntLE,t.readIntBE=D.readIntBE,t.readInt8=D.readInt8,t.readInt16LE=D.readInt16LE,t.readInt16BE=D.readInt16BE,t.readInt32LE=D.readInt32LE,t.readInt32BE=D.readInt32BE,t.readFloatLE=D.readFloatLE,t.readFloatBE=D.readFloatBE,t.readDoubleLE=D.readDoubleLE,t.readDoubleBE=D.readDoubleBE,t.writeUInt8=D.writeUInt8,t.writeUIntLE=D.writeUIntLE,t.writeUIntBE=D.writeUIntBE,t.writeUInt16LE=D.writeUInt16LE,t.writeUInt16BE=D.writeUInt16BE,t.writeUInt32LE=D.writeUInt32LE,t.writeUInt32BE=D.writeUInt32BE,t.writeIntLE=D.writeIntLE,t.writeIntBE=D.writeIntBE,t.writeInt8=D.writeInt8,t.writeInt16LE=D.writeInt16LE,t.writeInt16BE=D.writeInt16BE,t.writeInt32LE=D.writeInt32LE,t.writeInt32BE=D.writeInt32BE,t.writeFloatLE=D.writeFloatLE,t.writeFloatBE=D.writeFloatBE,t.writeDoubleLE=D.writeDoubleLE,t.writeDoubleBE=D.writeDoubleBE,t.fill=D.fill,t.inspect=D.inspect,t.toArrayBuffer=D.toArrayBuffer,t};var U=/[^+\/0-9A-z\-]/g},{"base64-js":3,ieee754:4,"is-array":5}],3:[function(t,e,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===f?62:e===a||e===p?63:u>e?-1:u+10>e?e-u+26+26:c+26>e?e-c:h+26>e?e-h+26:void 0}function r(t){function r(t){h[f++]=t}var n,i,s,a,u,h;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var c=t.length;u="="===t.charAt(c-2)?2:"="===t.charAt(c-1)?1:0,h=new o(3*t.length/4-u),s=u>0?t.length-4:t.length;var f=0;for(n=0,i=0;s>n;n+=4,i+=3)a=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===u?(a=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&a)):1===u&&(a=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(a>>8&255),r(255&a)),h}function i(t){function e(t){return n.charAt(t)}function r(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,s,a=t.length%3,u="";for(i=0,s=t.length-a;s>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=r(o);switch(a){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),a="/".charCodeAt(0),u="0".charCodeAt(0),h="a".charCodeAt(0),c="A".charCodeAt(0),f="-".charCodeAt(0),p="_".charCodeAt(0);t.toByteArray=r,t.fromByteArray=i}("undefined"==typeof r?this.base64js={}:r)},{}],4:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,h=u>>1,c=-7,f=r?i-1:0,p=r?-1:1,l=t[e+f];for(f+=p,o=l&(1<<-c)-1,l>>=-c,c+=a;c>0;o=256*o+t[e+f],f+=p,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=n;c>0;s=256*s+t[e+f],f+=p,c-=8);if(0===o)o=1-h;else{if(o===u)return s?0/0:1/0*(l?-1:1);s+=Math.pow(2,n),o-=h}return(l?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,u,h=8*o-i-1,c=(1<<h)-1,f=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,l=n?0:o-1,d=n?1:-1,m=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=c):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+f>=1?p/u:p*Math.pow(2,1-f),e*u>=2&&(s++,u/=2),s+f>=c?(a=0,s=c):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+l]=255&a,l+=d,a/=256,i-=8);for(s=s<<i|a,h+=i;h>0;t[r+l]=255&s,l+=d,s/=256,h-=8);t[r+l-d]|=128*m}},{}],5:[function(t,e){var r=Array.isArray,n=Object.prototype.toString;e.exports=r||function(t){return!!t&&"[object Array]"==n.call(t)}},{}],6:[function(t,e){e.exports=function(){var e=t("events"),r={};return r.createDomain=r.create=function(){function t(t){r.emit("error",t)}var r=new e.EventEmitter;return r.add=function(e){e.on("error",t)},r.remove=function(e){e.removeListener("error",t)},r.run=function(t){try{t()}catch(e){this.emit("error",e)}return this},r.dispose=function(){return this.removeAllListeners(),this},r},r}.call(this)},{events:7}],7:[function(t,e){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function s(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!i(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,r,i,a,u,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(r=this._events[t],s(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,a=new Array(i-1),u=1;i>u;u++)a[u-1]=arguments[u];r.apply(this,a)}else if(o(r)){for(i=arguments.length,a=new Array(i-1),u=1;i>u;u++)a[u-1]=arguments[u];for(h=r.slice(),i=h.length,u=0;i>u;u++)h[u].apply(this,a)}return!0},r.prototype.addListener=function(t,e){var i;if(!n(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned){var i;i=s(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},r.prototype.removeListener=function(t,e){var r,i,s,a;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],s=r.length,i=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(r)){for(a=s;a-->0;)if(r[a]===e||r[a].listener&&r[a].listener===e){i=a;break}if(0>i)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.listenerCount=function(t,e){var r;return r=t._events&&t._events[e]?n(t._events[e])?1:t._events[e].length:0}},{}],8:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],9:[function(t,e){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],10:[function(t,e){function r(){if(!s){s=!0;for(var t,e=o.length;e;){t=o,o=[];for(var r=-1;++r<e;)t[r]();e=o.length}s=!1}}function n(){}var i=e.exports={},o=[],s=!1;i.nextTick=function(t){o.push(t),s||setTimeout(r,0)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.on=n,i.addListener=n,i.once=n,i.off=n,i.removeListener=n,i.removeAllListeners=n,i.emit=n,i.binding=function(){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},{}],11:[function(t,e){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":12}],12:[function(t,e){(function(r){function n(t){return this instanceof n?(u.call(this,t),h.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new n(t)}function i(){this.allowHalfOpen||this._writableState.ended||r.nextTick(this.end.bind(this))}function o(t,e){for(var r=0,n=t.length;n>r;r++)e(t[r],r)}e.exports=n;var s=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e},a=t("core-util-is");a.inherits=t("inherits");var u=t("./_stream_readable"),h=t("./_stream_writable");a.inherits(n,u),o(s(h.prototype),function(t){n.prototype[t]||(n.prototype[t]=h.prototype[t])})}).call(this,t("_process"))},{"./_stream_readable":14,"./_stream_writable":16,_process:10,"core-util-is":17,inherits:8}],13:[function(t,e){function r(t){return this instanceof r?void n.call(this,t):new r(t)}e.exports=r;var n=t("./_stream_transform"),i=t("core-util-is");i.inherits=t("inherits"),i.inherits(r,n),r.prototype._transform=function(t,e,r){r(null,t)}},{"./_stream_transform":15,"core-util-is":17,inherits:8}],14:[function(t,e){(function(r){function n(e){e=e||{};var r=e.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(_||(_=t("string_decoder/").StringDecoder),this.decoder=new _(e.encoding),this.encoding=e.encoding)}function i(t){return this instanceof i?(this._readableState=new n(t,this),this.readable=!0,void N.call(this)):new i(t)}function o(t,e,r,n,i){var o=h(e,r);if(o)t.emit("error",o);else if(null===r||void 0===r)e.reading=!1,e.ended||c(t,e);else if(e.objectMode||r&&r.length>0)if(e.ended&&!i){var a=new Error("stream.push() after EOF");t.emit("error",a)}else if(e.endEmitted&&i){var a=new Error("stream.unshift() after end event");t.emit("error",a)}else!e.decoder||i||n||(r=e.decoder.write(r)),e.length+=e.objectMode?1:r.length,i?e.buffer.unshift(r):(e.reading=!1,e.buffer.push(r)),e.needReadable&&f(t),l(t,e);else i||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function a(t){if(t>=L)t=L;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function u(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:null===t||isNaN(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=a(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function h(t,e){var r=null;return O.isBuffer(e)||"string"==typeof e||null===e||void 0===e||t.objectMode||(r=new TypeError("Invalid non-string/buffer chunk")),r}function c(t,e){if(e.decoder&&!e.ended){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.length>0?f(t):w(t)}function f(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,e.sync?r.nextTick(function(){p(t)}):p(t))}function p(t){t.emit("readable")}function l(t,e){e.readingMore||(e.readingMore=!0,r.nextTick(function(){d(t,e)}))}function d(t,e){for(var r=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(t.read(0),r!==e.length);)r=e.length;e.readingMore=!1}function m(t){return function(){var e=t._readableState;e.awaitDrain--,0===e.awaitDrain&&g(t)}}function g(t){function e(t){var e=t.write(r);!1===e&&n.awaitDrain++}var r,n=t._readableState;for(n.awaitDrain=0;n.pipesCount&&null!==(r=t.read());)if(1===n.pipesCount?e(n.pipes,0,null):b(n.pipes,e),t.emit("data",r),n.awaitDrain>0)return;return 0===n.pipesCount?(n.flowing=!1,void(I.listenerCount(t,"data")>0&&x(t))):void(n.ranOut=!0)}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,g(this))}function x(t,e){var n=t._readableState;if(n.flowing)throw new Error("Cannot switch to old mode now.");var i=e||!1,o=!1;t.readable=!0,t.pipe=N.prototype.pipe,t.on=t.addListener=N.prototype.on,t.on("readable",function(){o=!0;for(var e;!i&&null!==(e=t.read());)t.emit("data",e);null===e&&(o=!1,t._readableState.needReadable=!0)}),t.pause=function(){i=!0,this.emit("pause")},t.resume=function(){i=!1,o?r.nextTick(function(){t.emit("readable")}):this.read(0),this.emit("resume")},t.emit("readable")}function v(t,e){var r,n=e.buffer,i=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===n.length)return null;if(0===i)r=null;else if(s)r=n.shift();else if(!t||t>=i)r=o?n.join(""):O.concat(n,i),n.length=0;else if(t<n[0].length){var a=n[0];r=a.slice(0,t),n[0]=a.slice(t)}else if(t===n[0].length)r=n.shift();else{r=o?"":new O(t);for(var u=0,h=0,c=n.length;c>h&&t>u;h++){var a=n[0],f=Math.min(t-u,a.length);o?r+=a.slice(0,f):a.copy(r,u,0,f),f<a.length?n[0]=a.slice(f):n.shift(),u+=f}}return r}function w(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");!e.endEmitted&&e.calledRead&&(e.ended=!0,r.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function b(t,e){for(var r=0,n=t.length;n>r;r++)e(t[r],r)}function S(t,e){for(var r=0,n=t.length;n>r;r++)if(t[r]===e)return r;return-1}e.exports=i;var E=t("isarray"),O=t("buffer").Buffer;i.ReadableState=n;var I=t("events").EventEmitter;I.listenerCount||(I.listenerCount=function(t,e){return t.listeners(e).length});var N=t("stream"),C=t("core-util-is");C.inherits=t("inherits");var _;C.inherits(i,N),i.prototype.push=function(t,e){var r=this._readableState;return"string"!=typeof t||r.objectMode||(e=e||r.defaultEncoding,e!==r.encoding&&(t=new O(t,e),e="")),o(this,r,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(e){_||(_=t("string_decoder/").StringDecoder),this._readableState.decoder=new _(e),this._readableState.encoding=e};var L=8388608;i.prototype.read=function(t){var e=this._readableState;e.calledRead=!0;var r,n=t;if(("number"!=typeof t||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f(this),null;if(t=u(t,e),0===t&&e.ended)return r=null,e.length>0&&e.decoder&&(r=v(t,e),e.length-=r.length),0===e.length&&w(this),r;var i=e.needReadable;return e.length-t<=e.highWaterMark&&(i=!0),(e.ended||e.reading)&&(i=!1),i&&(e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),i&&!e.reading&&(t=u(n,e)),r=t>0?v(t,e):null,null===r&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),e.ended&&!e.endEmitted&&0===e.length&&w(this),r},i.prototype._read=function(){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,e){function n(t){t===c&&o()}function i(){t.end()}function o(){t.removeListener("close",a),t.removeListener("finish",u),t.removeListener("drain",d),t.removeListener("error",s),t.removeListener("unpipe",n),c.removeListener("end",i),c.removeListener("end",o),(!t._writableState||t._writableState.needDrain)&&d()}function s(e){h(),t.removeListener("error",s),0===I.listenerCount(t,"error")&&t.emit("error",e)}function a(){t.removeListener("finish",u),h()}function u(){t.removeListener("close",a),h()}function h(){c.unpipe(t)}var c=this,f=this._readableState;switch(f.pipesCount){case 0:f.pipes=t;break;case 1:f.pipes=[f.pipes,t];break;default:f.pipes.push(t)}f.pipesCount+=1;var p=(!e||e.end!==!1)&&t!==r.stdout&&t!==r.stderr,l=p?i:o;f.endEmitted?r.nextTick(l):c.once("end",l),t.on("unpipe",n);var d=m(c);return t.on("drain",d),t._events&&t._events.error?E(t._events.error)?t._events.error.unshift(s):t._events.error=[s,t._events.error]:t.on("error",s),t.once("close",a),t.once("finish",u),t.emit("pipe",c),f.flowing||(this.on("readable",y),f.flowing=!0,r.nextTick(function(){g(c)
})),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,this.removeListener("readable",y),e.flowing=!1;for(var i=0;n>i;i++)r[i].emit("unpipe",this);return this}var i=S(e.pipes,t);return-1===i?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var r=N.prototype.on.call(this,t,e);if("data"!==t||this._readableState.flowing||x(this),"readable"===t&&this.readable){var n=this._readableState;n.readableListening||(n.readableListening=!0,n.emittedReadable=!1,n.needReadable=!0,n.reading?n.length&&f(this,n):this.read(0))}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){x(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){x(this,!0),this.emit("pause")},i.prototype.wrap=function(t){var e=this._readableState,r=!1,n=this;t.on("end",function(){if(e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&n.push(t)}n.push(null)}),t.on("data",function(i){if(e.decoder&&(i=e.decoder.write(i)),(!e.objectMode||null!==i&&void 0!==i)&&(e.objectMode||i&&i.length)){var o=n.push(i);o||(r=!0,t.pause())}});for(var i in t)"function"==typeof t[i]&&"undefined"==typeof this[i]&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return b(o,function(e){t.on(e,n.emit.bind(n,e))}),n._read=function(){r&&(r=!1,t.resume())},n},i._fromList=v}).call(this,t("_process"))},{_process:10,buffer:2,"core-util-is":17,events:7,inherits:8,isarray:9,stream:22,"string_decoder/":23}],15:[function(t,e){function r(t,e){this.afterTransform=function(t,r){return n(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function n(t,e,r){var n=t._transformState;n.transforming=!1;var i=n.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));n.writechunk=null,n.writecb=null,null!==r&&void 0!==r&&t.push(r),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function i(t){if(!(this instanceof i))return new i(t);s.call(this,t);var e=(this._transformState=new r(t,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(t){o(e,t)}):o(e)})}function o(t,e){if(e)return t.emit("error",e);var r=t._writableState,n=(t._readableState,t._transformState);if(r.length)throw new Error("calling transform done when ws.length != 0");if(n.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=i;var s=t("./_stream_duplex"),a=t("core-util-is");a.inherits=t("inherits"),a.inherits(i,s),i.prototype.push=function(t,e){return this._transformState.needTransform=!1,s.prototype.push.call(this,t,e)},i.prototype._transform=function(){throw new Error("not implemented")},i.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0}},{"./_stream_duplex":12,"core-util-is":17,inherits:8}],16:[function(t,e){(function(r){function n(t,e,r){this.chunk=t,this.encoding=e,this.callback=r}function i(t,e){t=t||{};var r=t.highWaterMark;this.highWaterMark=r||0===r?r:16384,this.objectMode=!!t.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){l(e,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(e){var r=t("./_stream_duplex");return this instanceof o||this instanceof r?(this._writableState=new i(e,this),this.writable=!0,void S.call(this)):new o(e)}function s(t,e,n){var i=new Error("write after end");t.emit("error",i),r.nextTick(function(){n(i)})}function a(t,e,n,i){var o=!0;if(!w.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!e.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),r.nextTick(function(){i(s)}),o=!1}return o}function u(t,e,r){return t.objectMode||t.decodeStrings===!1||"string"!=typeof e||(e=new w(e,r)),e}function h(t,e,r,i,o){r=u(e,r,i),w.isBuffer(r)&&(i="buffer");var s=e.objectMode?1:r.length;e.length+=s;var a=e.length<e.highWaterMark;return a||(e.needDrain=!0),e.writing?e.buffer.push(new n(r,i,o)):c(t,e,s,r,i,o),a}function c(t,e,r,n,i,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,t._write(n,i,e.onwrite),e.sync=!1}function f(t,e,n,i,o){n?r.nextTick(function(){o(i)}):o(i),t._writableState.errorEmitted=!0,t.emit("error",i)}function p(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function l(t,e){var n=t._writableState,i=n.sync,o=n.writecb;if(p(n),e)f(t,n,i,e,o);else{var s=y(t,n);s||n.bufferProcessing||!n.buffer.length||g(t,n),i?r.nextTick(function(){d(t,n,s,o)}):d(t,n,s,o)}}function d(t,e,r,n){r||m(t,e),n(),r&&x(t,e)}function m(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function g(t,e){e.bufferProcessing=!0;for(var r=0;r<e.buffer.length;r++){var n=e.buffer[r],i=n.chunk,o=n.encoding,s=n.callback,a=e.objectMode?1:i.length;if(c(t,e,a,i,o,s),e.writing){r++;break}}e.bufferProcessing=!1,r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}function y(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function x(t,e){var r=y(t,e);return r&&(e.finished=!0,t.emit("finish")),r}function v(t,e,n){e.ending=!0,x(t,e),n&&(e.finished?r.nextTick(n):t.once("finish",n)),e.ended=!0}e.exports=o;var w=t("buffer").Buffer;o.WritableState=i;var b=t("core-util-is");b.inherits=t("inherits");var S=t("stream");b.inherits(o,S),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,r){var n=this._writableState,i=!1;return"function"==typeof e&&(r=e,e=null),w.isBuffer(t)?e="buffer":e||(e=n.defaultEncoding),"function"!=typeof r&&(r=function(){}),n.ended?s(this,n,r):a(this,n,t,r)&&(i=h(this,n,t,e,r)),i},o.prototype._write=function(t,e,r){r(new Error("not implemented"))},o.prototype.end=function(t,e,r){var n=this._writableState;"function"==typeof t?(r=t,t=null,e=null):"function"==typeof e&&(r=e,e=null),"undefined"!=typeof t&&null!==t&&this.write(t,e),n.ending||n.finished||v(this,n,r)}}).call(this,t("_process"))},{"./_stream_duplex":12,_process:10,buffer:2,"core-util-is":17,inherits:8,stream:22}],17:[function(t,e,r){(function(t){function e(t){return Array.isArray(t)}function n(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function a(t){return"string"==typeof t}function u(t){return"symbol"==typeof t}function h(t){return void 0===t}function c(t){return f(t)&&"[object RegExp]"===y(t)}function f(t){return"object"==typeof t&&null!==t}function p(t){return f(t)&&"[object Date]"===y(t)}function l(t){return f(t)&&("[object Error]"===y(t)||t instanceof Error)}function d(t){return"function"==typeof t}function m(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function g(e){return t.isBuffer(e)}function y(t){return Object.prototype.toString.call(t)}r.isArray=e,r.isBoolean=n,r.isNull=i,r.isNullOrUndefined=o,r.isNumber=s,r.isString=a,r.isSymbol=u,r.isUndefined=h,r.isRegExp=c,r.isObject=f,r.isDate=p,r.isError=l,r.isFunction=d,r.isPrimitive=m,r.isBuffer=g}).call(this,t("buffer").Buffer)},{buffer:2}],18:[function(t,e){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":13}],19:[function(t,e,r){var n=t("stream");r=e.exports=t("./lib/_stream_readable.js"),r.Stream=n,r.Readable=r,r.Writable=t("./lib/_stream_writable.js"),r.Duplex=t("./lib/_stream_duplex.js"),r.Transform=t("./lib/_stream_transform.js"),r.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":12,"./lib/_stream_passthrough.js":13,"./lib/_stream_readable.js":14,"./lib/_stream_transform.js":15,"./lib/_stream_writable.js":16,stream:22}],20:[function(t,e){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":15}],21:[function(t,e){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":16}],22:[function(t,e){function r(){n.call(this)}e.exports=r;var n=t("events").EventEmitter,i=t("inherits");i(r,n),r.Readable=t("readable-stream/readable.js"),r.Writable=t("readable-stream/writable.js"),r.Duplex=t("readable-stream/duplex.js"),r.Transform=t("readable-stream/transform.js"),r.PassThrough=t("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(t,e){function r(e){t.writable&&!1===t.write(e)&&h.pause&&h.pause()}function i(){h.readable&&h.resume&&h.resume()}function o(){c||(c=!0,t.end())}function s(){c||(c=!0,"function"==typeof t.destroy&&t.destroy())}function a(t){if(u(),0===n.listenerCount(this,"error"))throw t}function u(){h.removeListener("data",r),t.removeListener("drain",i),h.removeListener("end",o),h.removeListener("close",s),h.removeListener("error",a),t.removeListener("error",a),h.removeListener("end",u),h.removeListener("close",u),t.removeListener("close",u)}var h=this;h.on("data",r),t.on("drain",i),t._isStdio||e&&e.end===!1||(h.on("end",o),h.on("close",s));var c=!1;return h.on("error",a),t.on("error",a),h.on("end",u),h.on("close",u),t.on("close",u),t.emit("pipe",h),t}},{events:7,inherits:8,"readable-stream/duplex.js":11,"readable-stream/passthrough.js":18,"readable-stream/readable.js":19,"readable-stream/transform.js":20,"readable-stream/writable.js":21}],23:[function(t,e,r){function n(t){if(t&&!u(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var a=t("buffer").Buffer,u=a.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},h=r.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),n(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new a(6),this.charReceived=0,this.charLength=0};h.prototype.write=function(t){for(var e="";this.charLength;){var r=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,r),this.charReceived+=r,this.charReceived<this.charLength)return"";t=t.slice(r,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var n=e.charCodeAt(e.length-1);if(!(n>=55296&&56319>=n)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,n=e.charCodeAt(i);if(n>=55296&&56319>=n){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},h.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var r=t[t.length-e];if(1==e&&r>>5==6){this.charLength=2;break}if(2>=e&&r>>4==14){this.charLength=3;break}if(3>=e&&r>>3==30){this.charLength=4;break}}this.charReceived=e},h.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var r=this.charReceived,n=this.charBuffer,i=this.encoding;e+=n.slice(0,r).toString(i)}return e}},{buffer:2}],24:[function(t,e){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],25:[function(t,e,r){(function(e,n){function i(t,e){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),m(e)?n.showHidden=e:e&&r._extend(n,e),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function s(t){return t}function a(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function u(t,e,n){if(t.customInspect&&e&&N(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return v(i)||(i=u(t,i,n)),i}var o=h(t,e);if(o)return o;var s=Object.keys(e),m=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),I(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(e);if(0===s.length){if(N(e)){var g=e.name?": "+e.name:"";return t.stylize("[Function"+g+"]","special")}if(S(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(O(e))return t.stylize(Date.prototype.toString.call(e),"date");if(I(e))return c(e)}var y="",x=!1,w=["{","}"];if(d(e)&&(x=!0,w=["[","]"]),N(e)){var b=e.name?": "+e.name:"";y=" [Function"+b+"]"}if(S(e)&&(y=" "+RegExp.prototype.toString.call(e)),O(e)&&(y=" "+Date.prototype.toUTCString.call(e)),I(e)&&(y=" "+c(e)),0===s.length&&(!x||0==e.length))return w[0]+y+w[1];if(0>n)return S(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var E;return E=x?f(t,e,n,m,s):s.map(function(r){return p(t,e,n,m,r,x)}),t.seen.pop(),l(E,y,w)}function h(t,e){if(b(e))return t.stylize("undefined","undefined");if(v(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return x(e)?t.stylize(""+e,"number"):m(e)?t.stylize(""+e,"boolean"):g(e)?t.stylize("null","null"):void 0}function c(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,i){for(var o=[],s=0,a=e.length;a>s;++s)o.push(J(e,String(s))?p(t,e,r,n,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(p(t,e,r,n,i,!0))}),o}function p(t,e,r,n,i,o){var s,a,h;if(h=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},h.get?a=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(a=t.stylize("[Setter]","special")),J(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(h.value)<0?(a=g(r)?u(t,h.value,null):u(t,h.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function l(t,e,r){var n=0,i=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function d(t){return Array.isArray(t)}function m(t){return"boolean"==typeof t}function g(t){return null===t}function y(t){return null==t}function x(t){return"number"==typeof t}function v(t){return"string"==typeof t}function w(t){return"symbol"==typeof t}function b(t){return void 0===t}function S(t){return E(t)&&"[object RegExp]"===_(t)}function E(t){return"object"==typeof t&&null!==t}function O(t){return E(t)&&"[object Date]"===_(t)}function I(t){return E(t)&&("[object Error]"===_(t)||t instanceof Error)}function N(t){return"function"==typeof t}function C(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function _(t){return Object.prototype.toString.call(t)}function L(t){return 10>t?"0"+t.toString(10):t.toString(10)}function A(){var t=new Date,e=[L(t.getHours()),L(t.getMinutes()),L(t.getSeconds())].join(":");return[t.getDate(),M[t.getMonth()],e].join(" ")}function J(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var k=/%[sdj%]/g;r.format=function(t){if(!v(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(t).replace(k,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}}),a=n[r];o>r;a=n[++r])s+=g(a)||!E(a)?" "+a:" "+i(a);return s},r.deprecate=function(t,i){function o(){if(!s){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),s=!0}return t.apply(this,arguments)}if(b(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return o};var R,T={};r.debuglog=function(t){if(b(R)&&(R=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!T[t])if(new RegExp("\\b"+t+"\\b","i").test(R)){var n=e.pid;T[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else T[t]=function(){};return T[t]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=m,r.isNull=g,r.isNullOrUndefined=y,r.isNumber=x,r.isString=v,r.isSymbol=w,r.isUndefined=b,r.isRegExp=S,r.isObject=E,r.isDate=O,r.isError=I,r.isFunction=N,r.isPrimitive=C,r.isBuffer=t("./support/isBuffer");var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",A(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!E(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":24,_process:10,inherits:8}],26:[function(t,e,r){(function(e){r.executor=t("./lib/executor"),r.filesystem=t("./lib/filesystem"),r.functions=t("./lib/functions"),r.parser=t("./lib/parser"),r.IOInterface=t("./lib/IOInterface"),r.repl=t("./lib/repl"),r.util=t("./lib/util");var n=t("./lib/IOInterface"),i=new n;i.setOutput(function(){throw new Error("No drawing interface")}),i.setInput(function(){throw new Error("No drawing interface")}),n.set("draw",i),r.run=function(t,n,i){i||n instanceof r.executor.ExecutionContext||(i=n,n=new r.executor.ExecutionContext);var o=r.parser.parse(t);if(o.error)return i&&e.nextTick(function(){i(o.error)}),n;try{r.executor.execute(o,n,i)}catch(s){return i(s),n}return n}}).call(this,t("_process"))},{"./lib/IOInterface":27,"./lib/executor":30,"./lib/filesystem":33,"./lib/functions":35,"./lib/parser":91,"./lib/repl":122,"./lib/util":123,_process:10}],27:[function(t,e){(function(r){function n(t,e,r){this._output=t||function(){},this._input=e||function(t){t("\n")},this._data=r||{}}{var i=t("./util");t("stream")}n.IOInterface=n,n.prototype.setOutput=function(t){this._output=t},n.prototype.setInput=function(t){this._input=t},n.prototype.write=function(t){if("function"!=typeof this._output)throw new Error("output is not a function");this._output.call(this._data,t)},n.prototype.writeln=function(t){this.write(t+"\n")},n.prototype.log=n.prototype.writeln,n.prototype.read=function(t){function e(e,o){if(i){o&&(r=e+" ");for(var s=0;s<e.length;s++){var a=[e[s]];"string"==typeof e[s]&&(o||(r+=e[s]),a.push(r)),a.push(function(){n._input.call(n._data,!1),i=!1}),t.apply({},a)}}}if("function"!=typeof this._input)throw new Error("input is not a function");var r="",n=this,i=!0;e.cancel=function(){n._input.call(n._data,!1),i=!1},n._input.call(n._data,e)},n.prototype.readln=function(t){this.read(function(e,r,n){if("\n"===e){n();var i=r.substring(0,r.length-2);t(i)}})},n.prototype.question=function(t,e){this.write(t),this.readln(e)};var o={},s={};n.set=function(t,e){if(!(e instanceof n))throw new Error("Interface is not an instance of IOInterface");if(t=t.toLowerCase(),o[t]=e,s[t]&&s[t].length)for(var r=0;r<s[t].length;r++)s[t][r]()},n.get=function(t,e){t=t.toLowerCase();var r;if(o[t]){var a=o[t];r=new n(a._output,a._input,i.shallowClone(a._data))}else r=n.getDefault();return e!==!1&&(s[t]||(s[t]=[]),s[t].push(function(){var e=n.get(t,!1);r._output=e._output,r._input=e._input,r._data=e._data})),r},n.setDefault=function(t){n.set("default",t)},n.getDefault=function(){return this.get("default")};var a=new n;r.browser?(a._data.accumulator="",a.setOutput(function(t){this.accumulator+=t;var e=this.accumulator.split("\n");e.length>1&&(""===e[e.length-1]&&(this.accumulator=this.accumulator.substring(0,this.accumulator.length-1)),console.log(this.accumulator),this.accumulator="")})):(r.stdin.setEncoding("utf8"),a.setOutput(function(t){r.stdout.write(t)}),a.setInput(function(t){t?(this.reader&&r.stdin.removeListener("readable",this.reader),this.reader=function(){var e=r.stdin.read();null!=e&&t(e)},r.stdin.on("readable",this.reader)):r.stdin.removeListener("readable",this.reader)})),n.setDefault(a),e.exports=n}).call(this,t("_process"))},{"./util":123,_process:10,stream:22}],28:[function(t,e){function r(e){this.stringVars={},this.numberVars={},this.pointers={},this.gosubs=[],this.private={rnd_seed:Math.random(),sprites:[]},this.constants=t("./constants"),this.running=!1,e=e||{},this.options=e,"undefined"==typeof e.delay&&(e.delay=!1);for(var r in s)s.hasOwnProperty(r)&&(this.constants[r]=s[r]);this.constants=h.shallowClone(this.constants)}function n(t,e,r,i){var o=e[0].execute(i);if(i.validate(o,"number"),o-=1,t.length<=o||0>o)throw new Error("Invalid array bounds");var s=t[o];if(e.length>1){if(!Array.isArray(s))throw new Error("Invalid array dimensions");return n(t[o],e.slice(1),r,i)}t[o]=r}function i(t,e,r){var n=e[0];if(r.validate(n,"number"),n=Math.floor(n-1),t.length<=n||0>n)throw new Error("Invalid array bounds");var o=t[n];if(e.length>1){if(!Array.isArray(o))throw new Error("Invalid array dimensions");return i(t[n],e.slice(1),r)}return o}function o(t,e){for(var r=t[0],n=new Array(r),i=0;r>i;i++){var s=e;t.length>1&&(s=o(t.slice(1),e)),n[i]=s}return n}var s=t("../functions"),a=t("../parser/statements"),u=t("domain"),h=(t("util"),t("../util"));r.prototype.execute=function(t,e,r){this.root=t,this.labels=e,this.cursor=this.options.cursorStart||0,this.running=!0,this.domain=u.create();var n=this;this.done=function(){r&&r.apply(this,arguments)},this.error=!1,this.domain.on("error",function(t){throw t}),this.domain.run(function(){n.nextLine()})},r.prototype.nextLine=function(){if(this.cursor=this.cursor.valueOf(),this.root.length<=this.cursor&&this.terminate(),!this.running)return void this.done(this.error);var t=this.root[this.cursor],e=t.execute(this),r=this;this.cursor++,"function"==typeof e?e(function(t){t&&(r.error=new Error(t.message+" on line "+r.cursor),r.terminate()),r.nextLine()}):this.nextLine()},r.prototype.validate=function(t,e){if(typeof t!==e)throw new Error("Types mismatch")},r.prototype.setVariable=function(t,e){var r="string"===t.type?this.stringVars:this.numberVars;if(e.error)throw e.error;var i=e;if(e instanceof a.ExpressionStatement&&(i=e.execute(this)),"string"===t.type)i=String(i);else if(i=parseFloat(i),isNaN(i))throw new Error("Types mismatch");t.isArray?n(r[t.name],t.dimensions,i,this):r[t.name]=i},r.prototype.getVariable=function(t){var e;if("string"===t.type&&"undefined"!=typeof this.constants[t.name+"$"])e=this.constants[t.name+"$"];else if("number"===t.type&&"undefined"!=typeof this.constants[t.name])e=this.constants[t.name];else if("string"===t.type&&"function"==typeof this.constants[t.name.toLowerCase()+"$"])e=this.constants[t.name.toLowerCase()+"$"];else if("number"===t.type&&"function"==typeof this.constants[t.name.toLowerCase()])e=this.constants[t.name.toLowerCase()];else{var r="string"===t.type?this.stringVars:this.numberVars;if(t.isArray)return i(r[t.name],t.dimensions,this);if("undefined"==typeof r[t.name])return"string"===t.type?"":0;e=r[t.name]}return"function"==typeof e?e.call(this):e},r.prototype.getPointer=function(t){var e=this.pointers[t.id];if("undefined"==typeof e)throw new Error("Invalid pointer");return e},r.prototype.setPointer=function(t,e){this.pointers[t.id]=e},r.prototype.setConstant=function(t,e){this.constants[t]=e},r.prototype.getPrivate=function(t){return this.private[t]},r.prototype.setPrivate=function(t,e){this.private[t]=e},r.prototype.defineArray=function(t,e){var r="number";"$"===t[t.length-1]&&(r="string",t=t.substring(0,t.length-1));var n=o(e,"string"===r?"":0),i="string"===r?this.stringVars:this.numberVars;i[t]=n},r.prototype.callFunction=function(t,e){var r=t.name+("string"===t.type?"$":""),n=this.constants[r.toLowerCase()];if(!n){var o="string"===t.type?this.stringVars:this.numberVars,s=o[t.name];if(Array.isArray(s))return i(s,e,this);throw new Error("Unknown function")}return n.apply(this,e)},r.prototype.callCommand=function(t){function e(e){try{t.execute(r,e)}catch(n){e(n)}}var r=this,n=r.options.delay;if(n!==!1){e=function(){setTimeout(function(){},n)}}return e},r.prototype.gosubLabel=function(t){if("undefined"==typeof this.labels[t])throw new Error('Undefined label "'+t+'"');this.gosubs.push(this.cursor),this.cursor=this.labels[t]},r.prototype.gotoLabel=function(t){if("undefined"==typeof this.labels[t])throw new Error('Undefined label "'+t+'"');this.cursor=this.labels[t]},r.prototype.returnLabel=function(){if(!this.gosubs.length)throw new Error("RETURN without GOSUB");this.cursor=this.gosubs.pop()},r.prototype.terminate=function(){this.running=!1},e.exports=r},{"../functions":35,"../parser/statements":103,"../util":123,"./constants":29,domain:6,util:25}],29:[function(t,e){var r=t("../util"),n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];e.exports={PI:Math.PI,TWO_PI:2*Math.PI,HALF_PI:Math.PI/2,EOF:0,BColorR:0,BColorG:0,BColorB:0,TColorR:0,TColorG:1,TColorB:0,ColorR:0,ColorG:1,ColorB:0,ColorA:1,IsRetina:0,IsPhone:0,IsPad:0,TickCount:function(){return r.now()},DATE$:function(){var t=new Date;return t.getDate()+" "+n[t.getMonth()].substring(0,3)+" "+t.getFullYear()},TIME$:function(){var t=new Date,e=!0,n=t.getHours();return n>12&&(n-=12,e=!1),r.pad(n,2,"0")+":"+r.pad(t.getMinutes(),2,"0")+":"+r.pad(t.getSeconds(),2,"0")+(e?" am":" pm")},DateYear:function(){return(new Date).getFullYear()},DateMonth:function(){return(new Date).getMonth()+1},DateMonth$:function(){return n[(new Date).getMonth()]},DateDay:function(){return(new Date).getDate()},DateWeekDay$:function(){return i[(new Date).getDay()]},TimeHours:function(){var t=(new Date).getHours();return 0===t&&(t=24),t},TimeMinutes:function(){return(new Date).getMinutes()},TimeSeconds:function(){return(new Date).getSeconds()}}},{"../util":123}],30:[function(t,e,r){function n(t,e,r){r||e instanceof i||(r=e,e=new i),t.execute(e,r)}var i=t("./ExecutionContext"),o=t("./constants");r.execute=n,r.ExecutionContext=i,r.constants=o},{"./ExecutionContext":28,"./constants":29}],31:[function(t,e){function r(t,e){this.name=t,this.root=e}var n=t("./File"),i=t("./");r.prototype.open=function(t){return this.root[t]||(this.root[t]=[]),new n(t,this.root[t],this)},r.prototype.save=function(t){i.save(t)},e.exports=r},{"./":33,"./File":32}],32:[function(t,e){function r(t,e,r){this.name=t,this.file=e,this.parent=r,this.readCursor=0,this.eof=!1}r.prototype.set=function(t){this.parent.root[this.name]=this.file=String(t).split("\n")},r.prototype.clear=function(){this.parent.root[this.name]=this.file=[]},r.prototype.nextLine=function(){if(this.eof||this.readCursor>=this.file.length)return this.eof=!0,"";var t=this.file[this.readCursor];return this.readCursor++,t},r.prototype.moveTo=function(t){this.readCursor=t,this.eof=this.readCursor>=this.file.length},r.prototype.write=function(t){for(var e=String(t).split("\n"),r=0;r<e.length;r++)this.file.push(e[r])},r.prototype.save=function(t){this.parent.save(t)},e.exports=r},{}],33:[function(t,e,r){(function(e,n){function i(t){t=t||function(){},f&&t(),u.readFile(n+"/../../data/filesystem.json",{encoding:"utf8"},function(e,r){f=e?{}:JSON.parse(r),t()})}function o(){return Boolean(f)}function s(t,e){return t=t.toLowerCase(),e=e||function(){},-1===c.indexOf(t)?e(new Error("Unknown drive")):f?(f[t]||(f[t]={}),p[t]||(p[t]=new h(t,f[t])),e(p[t]),p[t]):i(function(){s(t,e)})}function a(t){return e.browser?t():void u.writeFile(n+"/../../data/filesystem.json",JSON.stringify(f),function(e){t&&t(e)})}var u=t("fs"),h=t("./Drive"),c=["a","b"],f=e.browser?{}:!1,p={};r.Drive=h,r.File=t("./File"),r.initialize=i,r.initialized=o,r.drive=s,r.save=a}).call(this,t("_process"),"/lib\\filesystem")},{"./Drive":31,"./File":32,_process:10,fs:1}],34:[function(t,e,r){var n=t("../IOInterface").get("draw");r.touch=function(){var t=0;return n.read(function(e,r){"mousedown"===e.command&&(r(),t=e.data)}),n.write({command:"mousedown"}),t},r.touchx=function(){var t=0;return n.read(function(e,r){"mousepos"===e.command&&(r(),t=e.data.x)}),n.write({command:"mousepos"}),t},r.touchy=function(){var t=0;return n.read(function(e,r){"mousepos"===e.command&&(r(),t=e.data.y)}),n.write({command:"mousepos"}),t},r.screenwidth=function(){var t=0;return n.read(function(e,r){"screensize"===e.command&&(r(),t=e.data.width)}),n.write({command:"screensize"}),t},r.screenheight=function(){var t=0;return n.read(function(e,r){"screensize"===e.command&&(r(),t=e.data.height)}),n.write({command:"screensize"}),t},r.isportrait=function(){var t=0;return n.read(function(e,r){"screensize"===e.command&&(r(),t=e.data.height>e.data.width?1:0)}),n.write({command:"screensize"}),t},r.islandscape=function(){var t=0;return n.read(function(e,r){"screensize"===e.command&&(r(),t=e.data.height<=e.data.width?1:0)}),n.write({command:"screensize"}),t},r.accelx=function(){var t=0;return n.read(function(e,r){"accel"===e.command&&(r(),t=e.data.x)}),n.write({command:"accel"}),t},r.accely=function(){var t=0;return n.read(function(e,r){"accel"===e.command&&(r(),t=e.data.y)}),n.write({command:"accel"}),t},r.accelz=function(){var t=0;return n.read(function(e,r){"accel"===e.command&&(r(),t=e.data.z)}),n.write({command:"accel"}),t},r.spritewidth=function(t){var e=this.private.sprites[t];if(!e)throw new Error("Invalid sprite ID");return e.width},r.spriteheight=function(t){var e=this.private.sprites[t];if(!e)throw new Error("Invalid sprite ID");return e.height}},{"../IOInterface":27}],35:[function(t,e,r){function n(t){for(var e in t)t.hasOwnProperty(e)&&(r[e]=t[e])}n(t("./number")),n(t("./string")),n(t("./graphics"))},{"./graphics":34,"./number":36,"./string":37}],36:[function(t,e,r){function n(t){var e=1e4*Math.sin(t.getPrivate("rnd_seed"));return t.setPrivate("rnd_seed",t.getPrivate("rnd_seed")+1),e-Math.floor(e)}r.sin=function(t){return this.validate(t,"number"),Math.sin(t)},r.cos=function(t){return this.validate(t,"number"),Math.cos(t)},r.tan=function(t){return this.validate(t,"number"),Math.tan(t)
},r.asin=function(t){return this.validate(t,"number"),Math.asin(t)},r.acos=function(t){return this.validate(t,"number"),Math.acos(t)},r.atn=function(t){return this.validate(t,"number"),Math.atn(t)},r.rad=function(t){return this.validate(t,"number"),Math.rad(t)},r.deg=function(t){return this.validate(t,"number"),Math.deg(t)},r.sqr=function(t){return this.validate(t,"number"),Math.sqrt(t)},r.abs=function(t){return this.validate(t,"number"),Math.abs(t)},r.int=function(t){return this.validate(t,"number"),Math.floor(t)},r.log=function(t){return this.validate(t,"number"),Math.log(t)},r.log10=function(t){return this.validate(t,"number"),Math.log10(t)},r.exp=function(t){return this.validate(t,"number"),Math.exp(t)},r.mod=function(t,e){return this.validate(t,"number"),this.validate(e,"number"),t%e},r.rnd=function(t,e){return"undefined"!=typeof t&&"undefined"!=typeof e?(this.validate(t,"number"),this.validate(e,"number"),Math.floor(n(this)*(e-t+1))+t):n(this)},r.randomize=function(t){this.setPrivate("rnd_seed",t)}},{}],37:[function(t,e,r){r.upper$=function(t){return this.validate(t,"string"),t.toUpperCase()},r.lower$=function(t){return this.validate(t,"string"),t.toLowerCase()},r.left$=function(t,e){return this.validate(t,"string"),this.validate(e,"number"),t.substr(0,e)},r.mid$=function(t,e,r){return this.validate(t,"string"),this.validate(e,"number"),this.validate(r,"number"),t.substr(e,r)},r.right$=function(t,e){return this.validate(t,"string"),this.validate(e,"number"),t.substr(-e)},r.len=function(t){return this.validate(t,"string"),t.length},r.val=function(t){this.validate(t,"string");var e=parseFloat(t);if(isNaN(e))throw new Error("String is not a number");return e},r.str$=function(t){return this.validate(t,"number"),t.toString()},r.asc=function(t){return this.validate(t,"string"),t.charCodeAt(0)},r.chr$=function(t){return this.validate(t,"number"),String.fromCharCode(t)},r.spc$=function(t){return this.validate(t,"number"),new Array(t+1).join(" ")}},{}],38:[function(t,e){function r(t,e,r){this.root=t,this.labels=e,this.manager=r,r.parse(this)}var n=t("./statements");r.prototype.toString=function(){for(var t=[],e=0;e<this.root.length;e++)t.push(this.root[e].toString());for(var r in this.labels)if(this.labels.hasOwnProperty(r)){var i=this.labels[r];t[i]=this.root[i]instanceof n.EmptyStatement?r+":":r+" "+t[i]}return t.join("\n")},r.prototype.toJSON=function(){for(var t=[],e=0;e<this.root.length;e++)t.push(this.root[e].toJSON());return{root:t,labels:this.labels}},r.prototype.execute=function(t,e){t.execute(this.root,this.labels,e)},e.exports=r},{"./statements":103}],39:[function(t,e){function r(t,e,r){this.startNames=[],this.thenNames=[],this.endNames=[];for(var n=0;n<e.start.length;n++)this.startNames.push(e.start[n].toLowerCase());for(var i=0;i<e.end.length;i++)this.endNames.push(e.end[i].toLowerCase());for(var o=0;o<e.then.length;o++)this.thenNames.push(e.then[o].toLowerCase());this.line=t,this.parent=r,this.searchIndex=t,this.start=-1,this.intermediateIndexes={},this.intermediateCursors={},this.end=-1}var n=t("../statements"),i=t("../SyntaxError");r.prototype.parse=function(t){for(var e=t.root,r=0,o=this.intermediateIndexes={},s=this.searchIndex;s<e.length;s++){var a=e[s];if(a instanceof n.CommandStatement){var u=a.name;if(-1!==this.startNames.indexOf(u))0===r&&(this.start=s),r++;else if(-1!==this.thenNames.indexOf(u)&&1===r)o[u]||(o[u]=[]),o[u].push(s);else if(-1!==this.endNames.indexOf(u)){if(r--,0>r)throw new i("Unexpected "+u.toUpperCase());if(0===r)return void(this.end=s)}}}if(0!==r)throw new i(this.startNames[0].toUpperCase()+" without "+this.endNames[0].toUpperCase())},r.prototype.has=function(t){return t=t.toLowerCase(),-1===this.thenNames.indexOf(t)?!1:this.intermediateIndexes[t]?Boolean(this.intermediateIndexes[t].length):!1},r.prototype.next=function(t){if(t=t.toLowerCase(),!this.has(t))return-1;this.intermediateCursors[t]||(this.intermediateCursors[t]=0);var e=this.intermediateCursors[t];e>=this.intermediateIndexes[t].length&&(e=this.intermediateCursors[t]=0);var r=this.intermediateIndexes[t][e];return this.intermediateCursors[t]++,r},r.prototype.references=function(){return this.parent.byLineRef[this.line]},r.prototype.toJSON=function(){return{line:this.line,searchIndex:this.searchIndex,start:this.start,intermediateIndexes:this.intermediateIndexes,intermediateCursors:this.intermediateCursors,end:this.end}},e.exports=r},{"../SyntaxError":41,"../statements":103}],40:[function(t,e){function r(){this.children=[],this.byLineRef={}}function n(t,e,r){t[r]||(t[r]=[]),t[r].push(e)}var i=t("./Block");r.Block=i,r.BlockManager=r,r.prototype.parse=function(t){for(var e=0;e<this.children.length;e++){var r=this.children[e];r.parse(t),-1!==r.start&&n(this.byLineRef,r,r.start),-1!==r.end&&n(this.byLineRef,r,r.end);for(var i in r.intermediateIndexes)if(r.intermediateIndexes.hasOwnProperty(i))for(var o=r.intermediateIndexes[i],s=0;s<o.length;s++)n(this.byLineRef,r,o[s])}},r.prototype.create=function(t){var e=this,r=function(r){var n=Array.isArray(r.start)?r.start:[r.start],o=Array.isArray(r.end)?r.end:[r.end],s=r.then?Array.isArray(r.then)?r.then:[r.then]:[],a=new i(t,{start:n,end:o,then:s},e);return e.children.push(a),a};return r.references=function(){return e.byLineRef[t]},r.line=t,r.toJSON=function(){for(var r=[],n=e.byLineRef[t],i=0;i<n.length;i++)r.push(n[i].toJSON());return{line:t,lineRef:r}},r},e.exports=r},{"./Block":39}],41:[function(t,e){function r(t){this.message=t}r.prototype.toString=function(){return this.message},e.exports=r},{}],42:[function(t,e){function r(){}var n=t("../../IOInterface").get("draw");r.prototype.execute=function(t,e){n.write({command:"accel",args:{calibrate:!0}}),e()},e.exports=r},{"../../IOInterface":27}],43:[function(t,e){function r(){}r.prototype.execute=function(t,e){e()},e.exports=r},{}],44:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<3)throw new i("BCOLOR command requires 3 arguments");this.red=e.args[0],this.green=e.args[1],this.blue=e.args[2]}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){return[this.red,this.green,this.blue].join(", ")},r.prototype.toJSON=function(){return{r:this.red.toJSON(),g:this.green.toJSON(),b:this.blue.toJSON()}},r.prototype.execute=function(t,e){var r=this.red.execute(t),n=this.green.execute(t),i=this.blue.execute(t);t.validate(r,"number"),t.validate(n,"number"),t.validate(i,"number");var s=r,a=n,u=i;r>1&&(r/=255),n>1&&(n/=255),i>1&&(i/=255),r=Math.max(0,Math.min(r,1)),n=Math.max(0,Math.min(n,1)),i=Math.max(0,Math.min(i,1)),t.setConstant("BColorR",s),t.setConstant("BColorG",a),t.setConstant("BColorB",u),o.write({command:"bcolor",args:{r:r,g:n,b:i}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],45:[function(t,e){function r(){}var n=t("../../IOInterface").get("draw");r.prototype.execute=function(t,e){n.write({command:"startCache"}),e()},e.exports=r},{"../../IOInterface":27}],46:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<3)throw new i("CIRCLE command requires 3 arguments");this.x=e.args[0],this.y=e.args[1],this.radius=e.args[2],this.stroke=e.args.length>3?e.args[3]:!1}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){var t=[this.x,this.y,this.radius];return this.stroke&&t.push(this.stroke),t.join(", ")},r.prototype.toJSON=function(){return{x:this.x.toJSON(),y:this.y.toJSON(),radius:this.radius.toJSON(),stroke:this.stroke?this.stroke.toJSON():!1}},r.prototype.execute=function(t,e){var r=this.x.execute(t),n=this.y.execute(t),i=this.radius.execute(t),s=this.stroke?this.stroke.execute(t):0;t.validate(r,"number"),t.validate(n,"number"),t.validate(i,"number"),t.validate(s,"number"),o.write({command:"circle",args:{x:r,y:n,radius:i,stroke:s}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],47:[function(t,e){function r(t,e){var r=new n.ExpressionStatement(t,e);if(!(r.child instanceof n.PointerStatement))throw new i("Expected pointer");this.pointer=r}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../filesystem");r.prototype.toString=function(){return this.pointer.toString()},r.prototype.toJSON=function(){return{pointer:this.pointer.toJSON()}},r.prototype.execute=function(t,e){var r=this.pointer.execute(t);if(!(r instanceof o.File))throw new Error("Expected file");t.setPointer(this.pointer.child,!1),e()},e.exports=r},{"../../filesystem":33,"../SyntaxError":41,"../statements":103}],48:[function(t,e){(function(r){function n(t){var e=t.toLowerCase();this.tty="gfx"!==e,this.gfx="tty"!==e}var i=t("../../IOInterface").get("draw");n.prototype.toString=function(){return this.tty&&!this.gfx?"TTY":this.gfx&&!this.tty?"GFX":""},n.prototype.toJSON=function(){return{tty:this.tty,gfx:this.gfx}},n.prototype.execute=function(t,e){this.tty&&(r.browser?i.write({command:"clear",args:{type:"tty"}}):console.log(new Array(r.stdout.rows+1).join("\n"))),this.gfx&&r.browser&&i.write({command:"clear",args:{type:"gfx"}}),e()},e.exports=n}).call(this,t("_process"))},{"../../IOInterface":27,_process:10}],49:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<3)throw new i("COLOR command requires 3 arguments");this.red=e.args[0],this.green=e.args[1],this.blue=e.args[2],this.alpha=e.args.length>3?e.args[3]:!1}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){var t=[this.red,this.green,this.blue];return this.alpha&&t.push(this.alpha),t.join(", ")},r.prototype.toJSON=function(){return{r:this.red.toJSON(),g:this.green.toJSON(),b:this.blue.toJSON(),a:this.alpha?this.alpha.toJSON():!1}},r.prototype.execute=function(t,e){var r=this.red.execute(t),n=this.green.execute(t),i=this.blue.execute(t),s=this.alpha?this.alpha.execute(t):!1;t.validate(r,"number"),t.validate(n,"number"),t.validate(i,"number"),s!==!1?t.validate(s,"number"):s=t.constants.ColorA;var a=r,u=n,h=i,c=s;r>1&&(r/=255),n>1&&(n/=255),i>1&&(i/=255),s>1&&(s/=255),r=Math.max(0,Math.min(r,1)),n=Math.max(0,Math.min(n,1)),i=Math.max(0,Math.min(i,1)),s=Math.max(0,Math.min(s,1)),t.setConstant("ColorR",a),t.setConstant("ColorG",u),t.setConstant("ColorB",h),t.setConstant("ColorA",c),o.write({properties:{r:r,g:n,b:i,a:s}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],50:[function(t,e){function r(t){var e=new n.ArgumentStatement(t,{parseArgs:!1});this.creates=[];for(var r=0;r<e.args.length;r++){var o=e.args[r],s=o.indexOf("("),a=o.indexOf(")");if(-1===s)throw new i("Expected start bracket");if(-1===a)throw new i("Expected end bracket");var u=o.substring(0,s).trim(),h=o.substring(s+1,a),c=new n.ArgumentStatement(h);this.creates.push({name:u,lengths:c.args})}}var n=t("../statements"),i=t("../SyntaxError");r.prototype.toString=function(){for(var t=[],e=0;e<this.creates.length;e++){var r=this.creates[e];t.push(r.name+"("+r.lengths.join(", ")+")")}return t.join(", ")},r.prototype.toJSON=function(){for(var t=[],e=0;e<this.creates.length;e++){for(var r=[],n=this.creates[e],i=0;i<n.lengths.length;i++)r.push(n.lengths[i].toJSON());t.push({name:n.name.toJSON(),lengths:r})}return{creates:t}},r.prototype.execute=function(t,e){for(var r=0;r<this.creates.length;r++){for(var n=this.creates[r],i=[],o=0;o<n.lengths.length;o++){var s=n.lengths[o].execute(t);t.validate(s,"number"),i.push(s)}t.defineArray(n.name,i)}e()},e.exports=r},{"../SyntaxError":41,"../statements":103}],51:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<3)throw new i("DRAWSPRITE command requires 3 arguments");this.id=e.args[0],this.x=e.args[1],this.y=e.args[2],this.scale=4===e.args.length?e.args[3]:!1,this.rotation=5===e.args.length?e.args[4]:!1}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){var t=[this.id,this.x,this.y];return this.scale&&t.push(this.scale),this.rotation&&t.push(this.rotation),t.join(", ")},r.prototype.toJSON=function(){return{id:this.id.toJSON(),x:this.x.toJSON(),y:this.y.toJSON(),scale:this.scale?this.scale.toJSON():!1,rotation:this.rotation?this.rotation.toJSON():!1}},r.prototype.execute=function(t,e){var r=this.id.execute(t),n=this.x.execute(t),i=this.y.execute(t),s=this.scale?this.scale.execute(t):1,a=this.rotation?this.rotation.execute(t):0;if(t.validate(r,"number"),t.validate(n,"number"),t.validate(i,"number"),t.validate(s,"number"),t.validate(a,"number"),!t.private.sprites[r])throw new Error("Invalid sprite ID");var u=t.private.sprites[r];o.print({command:"sprite",args:{x:n,y:i,scale:s,rotation:a,sprite:u}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],52:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<3)throw new i("DRAWTEXT command requires 3 arguments");if(e.args.length>3&&e.args.length<5)throw new i("DRAWTEXT command requires 5 arguments");this.text=e.args[0],this.x1=e.args[1],this.y1=e.args[2],e.args.length>3?(this.x2=e.args[3],this.y2=e.args[4]):(this.x2=!1,this.y2=!1)}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){var t=[this.text,this.x1,this.y1];return this.x2&&t.push(this.x2,this.y2),t.join(", ")},r.prototype.toJSON=function(){return{text:this.text.toJSON(),x1:this.x1.toJSON(),y1:this.y1.toJSON(),x2:this.x2?this.x2.toJSON():!1,y2:this.y2?this.y2.toJSON():!1}},r.prototype.execute=function(t,e){var r=this.text.execute(t),n=this.x1.execute(t),i=this.y1.execute(t);t.validate(r,"string"),t.validate(n,"number"),t.validate(i,"number");var s,a=!1;this.x2&&(s=this.x2.execute(t),a=this.y2.execute(t),t.validate(s,"number"),t.validate(a,"number")),o.write({command:"text",args:{text:r,x1:n,y1:i,x2:s,y2:a}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],53:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<4)throw new i("ELLIPSE command requires 4 arguments");this.x1=e.args[0],this.y1=e.args[1],this.x2=e.args[2],this.y2=e.args[3],this.stroke=e.args.length>4?e.args[4]:!1}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){var t=[this.x1,this.y1,this.x2,this.y2];return this.stroke&&t.push(this.stroke),t.join(", ")},r.prototype.toJSON=function(){return{x1:this.x1.toJSON(),y1:this.y1.toJSON(),x2:this.x2.toJSON(),y2:this.y2.toJSON(),stroke:this.stroke?this.stroke.toJSON():!1}},r.prototype.execute=function(t,e){var r=this.x1.execute(t),n=this.y1.execute(t),i=this.x2.execute(t),s=this.y2.execute(t),a=this.stroke?this.stroke.execute(t):0;t.validate(r,"number"),t.validate(n,"number"),t.validate(i,"number"),t.validate(s,"number"),t.validate(a,"number"),o.write({command:"ellipse",args:{x1:r,y1:n,x2:i,y2:s,stroke:a}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],54:[function(t,e){function r(t,e){this.block=e}r.prototype.toJSON=function(){return{block:this.block.toJSON()}},r.prototype.execute=function(t,e){var r=this.block.references();if(!r.length)throw new Error("ELSE without IF");t.cursor=r[0].end,e()},e.exports=r},{}],55:[function(t,e){function r(){}t("../statements"),t("../SyntaxError");r.prototype.execute=function(t,e){t.terminate(),e()},e.exports=r},{"../SyntaxError":41,"../statements":103}],56:[function(t,e){function r(){}var n=t("../../IOInterface").get("draw");r.prototype.execute=function(t,e){n.write({command:"flushCache"}),e()},e.exports=r},{"../../IOInterface":27}],57:[function(t,e){function r(){}r.prototype.execute=function(t,e){e()},e.exports=r},{}],58:[function(t,e){function r(t,e){var r=t.toLowerCase(),i=r.indexOf(" to ");if(-1===i)throw new o("FOR has no TO");var s,a,u=t.substring(0,i).trim(),h=r.indexOf(" step ");-1===h?(s=t.substring(i+4).trim(),a="1"):(s=t.substring(i+4,h).trim(),a=t.substring(h+6).trim());var c=u.indexOf("=");if(-1===c)throw new o("Expected assignment");var f=u.substring(0,c).trim(),p=u.substring(c+1).trim(),l=new n.AssignmentStatement(new n.VariableStatement(f),new n.ExpressionStatement(p,e)),d=new n.ExpressionStatement(s,e);if(d.error)throw d.error;var m=new n.ExpressionStatement(a,e);if(m.error)throw m.error;this.assignmentExpr=l,this.upperLimitExpr=d,this.stepExpr=m,this.block=e({start:"FOR",end:"NEXT"})}var n=t("../statements"),i=t("../../util"),o=t("../SyntaxError"),s=i.setImmediate;r.prototype.toString=function(){return this.assignmentExpr.toString()+" TO "+this.upperLimitExpr.toString()+" STEP "+this.stepExpr.toString()},r.prototype.toJSON=function(){return{assignment:this.assignmentExpr.toJSON(),upperLimit:this.upperLimitExpr.toJSON(),step:this.stepExpr.toJSON(),block:this.block.toJSON()}},r.prototype.execute=function(t,e){var r;if(this.hasRun){var n=this.stepExpr.execute(t);t.validate(n,"number"),r=t.getVariable(this.trackVar),t.validate(r,"number"),r+=n,t.setVariable(this.trackVar,r)}else this.hasRun=!0,this.assignmentExpr.execute(t),this.trackVar=this.assignmentExpr.variable,r=t.getVariable(this.trackVar);var i=this.upperLimitExpr.execute(t);t.validate(i,"number"),(i>0&&r>i||0>i&&i>r)&&(this.hasRun=!1,t.cursor=this.block.end+1),s(e)},e.exports=r},{"../../util":123,"../SyntaxError":41,"../statements":103}],59:[function(t,e){function r(t){if(!t.length)throw new n("Label required");this.label=t}var n=t("../SyntaxError"),i=t("../../util"),o=i.setImmediate;r.prototype.toString=function(){return this.label},r.prototype.toJSON=function(){return{label:this.label}},r.prototype.execute=function(t,e){t.gosubLabel(this.label),o(e)},e.exports=r},{"../../util":123,"../SyntaxError":41}],60:[function(t,e){function r(t){if(!t.length)throw new n("Label required");this.label=t}var n=t("../SyntaxError"),i=t("../../util"),o=i.setImmediate;r.prototype.toString=function(){return this.label},r.prototype.toJSON=function(){return{label:this.label}},r.prototype.execute=function(t,e){t.gotoLabel(this.label),o(e)},e.exports=r},{"../../util":123,"../SyntaxError":41}],61:[function(t,e){function r(t,e){if(!i.endsWith(t.toLowerCase()," then"))throw new o("IF has no THEN");t=t.slice(0,t.length-5).trim();var r=new n.ArgumentStatement(t,{separator:!1},e);this.condition=r.args[0],this.block=e({start:"IF",then:"ELSE",end:"ENDIF"})}var n=t("../statements"),i=t("../../util"),o=t("../SyntaxError");r.prototype.toString=function(){return this.condition.toString()+" THEN"},r.prototype.toJSON=function(){return{condition:this.condition.toJSON(),block:this.block.toJSON()}},r.prototype.execute=function(t,e){var r=this.condition.execute(t);r||(t.cursor=this.block.has("ELSE")?this.block.next("ELSE")+1:this.block.end),e()},e.exports=r},{"../../util":123,"../SyntaxError":41,"../statements":103}],62:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(!e.args.length)throw new i("INPUT requires at least one argument");var r,o,s="";if(1===e.args.length?r=e.args[0]:(e.args[0].child instanceof n.PointerStatement?o=e.args[0]:s=e.args[0],r=e.args[1]),!(r.child instanceof n.VariableStatement||r.child instanceof n.FunctionStatement))throw new i("Expected variable");this.file=o,this.question=s,this.placeVar=r}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../filesystem"),s=t("../../IOInterface").getDefault();r.prototype.toString=function(){return(this.file?this.file.toString()+", ":"")+(this.question?this.question.toString()+", ":"")+this.placeVar.toString()},r.prototype.toJSON=function(){return{file:this.file?this.file.toJSON():!1,question:this.question?this.question.toJSON():!1,variable:this.placeVar.toJSON()}},r.prototype.execute=function(t,e){var r=this.placeVar;if(this.file){var n=this.file.execute(t);if(!(n instanceof o.File))throw new Error("Expected file");if("input"!==n.mode)throw new Error("File not readable");var i=n.nextLine();n.eof&&"number"===r.child.type&&(i=0),t.setVariable(r.child,i),t.setConstant("EOF",n.eof?1:0),e()}else{var a=this.question?this.question.execute(t):"";s.question(a+"> ",function(n){t.setVariable(r.child,n),e()})}},e.exports=r},{"../../IOInterface":27,"../../filesystem":33,"../SyntaxError":41,"../statements":103}],63:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<4)throw new i("LINE command requires 4 arguments");this.x1=e.args[0],this.y1=e.args[1],this.x2=e.args[2],this.y2=e.args[3],this.width=e.args.length>4?e.args[4]:!1}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){var t=[this.x1,this.y1,this.x2,this.y2];return this.width&&t.push(this.width),t.join(", ")},r.prototype.toJSON=function(){return{x1:this.x1.toJSON(),y1:this.y1.toJSON(),x2:this.x2.toJSON(),y2:this.y2.toJSON(),width:this.width?this.width.toJSON():!1}},r.prototype.execute=function(t,e){var r=this.x1.execute(t),n=this.y1.execute(t),i=this.x2.execute(t),s=this.y2.execute(t),a=this.width?this.width.execute(t):1;t.validate(r,"number"),t.validate(n,"number"),t.validate(i,"number"),t.validate(s,"number"),t.validate(a,"number"),o.write({command:"line",args:{x1:r,y1:n,x2:i,y2:s,width:a}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],64:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<2)throw new i("LOADSPRITE command requires 2 arguments");if(e.args.length>2&&e.args.length<5)throw new i("LOADSPRITE command requires 5 arguments");this.id=e.args[0],e.args.length>2?(this.x1=e.args[1],this.y1=e.args[2],this.x2=e.args[3],this.y2=e.args[4]):this.fileName=e.args[1]}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../filesystem"),s=t("../../IOInterface").get("draw");r.prototype.toString=function(){if(this.x1){var t=[this.id,this.x1,this.y1,this.x2,this.y2];return t.join(", ")}return this.id+", "+this.fileName},r.prototype.toJSON=function(){return{id:this.id.toJSON(),x1:this.x1?this.x1.toJSON():!1,y1:this.y1?this.y1.toJSON():!1,x2:this.x2?this.x2.toJSON():!1,y2:this.y2?this.y2.toJSON():!1,fileName:this.fileName?this.fileName.toJSON():!1}},r.prototype.execute=function(t,e){var r=this.id.execute(t);if(t.validate(r,"number"),this.x1){var n=this.x1.execute(t),i=this.y1.execute(t),a=this.x2.execute(t),u=this.y2.execute(t);t.validate(n,"number"),t.validate(i,"number"),t.validate(a,"number"),t.validate(u,"number"),s.read(function(n,i){"capture"===n.command&&(i(),t.private.sprites[r]=n.data,e())}),s.write({command:"capture",args:{x1:n,y1:i,x2:a,y2:u}})}else{var h=this.fileName.execute(t);t.validate(h,"string");var c=h.indexOf(":"),f="A";-1!==c&&(f=h.substring(0,c),h=h.substring(c+1)),o.drive(f,function(n){var i=n.open(h),o=i.nextLine();if(i.eof||!o.length)throw new Error("Invalid image file");var s=new Image;s.src=o,t.private.sprites[r]=s,e()})}},e.exports=r},{"../../IOInterface":27,"../../filesystem":33,"../SyntaxError":41,"../statements":103}],65:[function(t,e){function r(){}var n=t("../../IOInterface").get("draw");r.prototype.execute=function(t,e){n.write({command:"locksize"}),e()},e.exports=r},{"../../IOInterface":27}],66:[function(t,e){function r(t,e){this.block=e}r.prototype.toJSON=function(){return{block:this.block.toJSON()}},r.prototype.execute=function(t,e){var r=this.block.references();if(!r.length)throw new Error("NEXT without FOR");t.cursor=r[0].start,e()},e.exports=r},{}],67:[function(t,e){function r(t,e){var r=t.toLowerCase(),o=r.indexOf(" for ");if(-1===o)throw new i("OPEN without FOR");var s=new n.ExpressionStatement(t.substring(0,o).trim(),e),a=r.indexOf(" as ");if(-1===a)throw new i("OPEN without AS");var u=t.substring(o+5,a).trim().toLowerCase();if("input"!==u&&"output"!==u&&"append"!==u)throw new i("Invalid mode");var h=new n.ExpressionStatement(t.substring(a+4).trim(),e);if(!(h.child instanceof n.PointerStatement))throw new i("Expected pointer");this.filename=s,this.type=u,this.pointer=h}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../filesystem");r.prototype.toString=function(){return this.filename.toString()+" FOR "+this.type.toUpperCase()+" AS "+this.pointer.toString()},r.prototype.toJSON=function(){return{filename:this.filename.toJSON(),type:this.type,pointer:this.pointer.toJSON()}},r.prototype.execute=function(t,e){var r=this.filename.execute(t);t.validate(r,"string");var n=r.indexOf(":"),i="A";-1!==n&&(i=r.substring(0,n),r=r.substring(n+1));var s=this.pointer.child,a=this.type;o.drive(i,function(n){var i=n.open(r);i.mode=a,"output"===a&&i.clear(),t.setPointer(s,i),e()})},e.exports=r},{"../../filesystem":33,"../SyntaxError":41,"../statements":103}],68:[function(t,e){function r(t,e){if(t.length){if(this.message=new n.ExpressionStatement(t,e),this.message.error)throw this.message.error}else this.message=new n.StringStatement("[<< Paused, Press RETURN to Continue >>]")}var n=t("../statements"),i=(t("../SyntaxError"),t("../../IOInterface").getDefault());r.prototype.toString=function(){return this.message.toString()},r.prototype.toJSON=function(){return{message:this.message.toJSON()}},r.prototype.execute=function(t,e){var r=this.message.execute(t);t.validate(r,"string"),i.question(r,function(){e()})},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],69:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<8)throw new i("PIECHART command requires 8 arguments");this.x=e.args[0],this.y=e.args[1],this.r=e.args[2],this.itemsLength=e.args[3],this.percentages=e.args[4],this.itemsRed=e.args[5],this.itemsGreen=e.args[6],this.itemsBlue=e.args[7]}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){var t=[this.x,this.y,this.r,this.itemsLength,this.percentages,this.itemsRed,this.itemsGreen,this.itemsBlue];return t.join(", ")},r.prototype.toJSON=function(){return{x:this.x.toJSON(),y:this.y.toJSON(),r:this.r.toJSON(),itemsLength:this.itemsLength.toJSON(),percentages:this.percentages.toJSON(),itemsRed:this.itemsRed.toJSON(),itemsGreen:this.itemsGreen.toJSON(),itemsBlue:this.itemsBlue.toJSON()}},r.prototype.execute=function(t,e){var r=this.x.execute(t),n=this.y.execute(t),i=this.r.execute(t),s=this.itemsLength.execute(t),a=this.percentages.execute(t),u=this.itemsRed.execute(t),h=this.itemsGreen.execute(t),c=this.itemsBlue.execute(t);if(t.validate(r,"number"),t.validate(n,"number"),t.validate(i,"number"),t.validate(s,"number"),!Array.isArray(a))throw new Error("Types mismatch");if(!Array.isArray(u))throw new Error("Types mismatch");if(!Array.isArray(h))throw new Error("Types mismatch");if(!Array.isArray(c))throw new Error("Types mismatch");if(s>a.length||s>u.length||s>h.length||s>c.length)throw new Error("Invalid array bounds");for(var f=[],p=0;s>p;p++){var l=a[p],d=u[p],m=h[p],g=c[p];t.validate(l,"number"),t.validate(d,"number"),t.validate(m,"number"),t.validate(g,"number"),f.push({size:l,r:d,g:m,b:g})}o.write({command:"piechart",args:{items:f,x:r,y:n,r:i}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],70:[function(t,e){function r(){}r.prototype.execute=function(t,e){e()},e.exports=r},{}],71:[function(t,e){function r(){}r.prototype.execute=function(t,e){e()},e.exports=r},{}],72:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<2)throw new i("POINT command requires 2 arguments");this.x=e.args[0],this.y=e.args[1],this.size=e.args.length>2?e.args[2]:!1}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){var t=[this.x,this.y];return this.size&&t.push(this.size),t.join(", ")},r.prototype.toJSON=function(){return{x:this.x.toJSON(),y:this.y.toJSON(),size:this.size?this.size.toJSON():!1}},r.prototype.execute=function(t,e){var r=this.x.execute(t),n=this.y.execute(t),i=this.size?this.size.execute(t):1;t.validate(r,"number"),t.validate(n,"number"),t.validate(i,"number"),o.write({command:"point",args:{x:r,y:n,size:i}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],73:[function(t,e){function r(t,e){";"===t[t.length-1]?(this.noLine=!0,t=t.substr(-1)):this.noLine=!1;var r=new n.ArgumentStatement(t,{flags:["USING"],parseArgs:!1});if(r.flags.USING){if(1!==r.args.length)throw new i("PRINT USING command requires 1 argument");if(r.args.length>1)throw new i("Unexpected comma");var o=r.args[0].indexOf(";");if(-1===o)throw new i("Expected semicolon");var s=new n.ExpressionStatement(r.args[0].substring(0,o).trim(),e),a=new n.ExpressionStatement(r.args[0].substring(o+1).trim(),e);if(s.error instanceof i)throw s.error;if(a.error instanceof i)throw a.error;this.formatExpr=s,this.numberExpr=a}else{for(var u=[],h=0;h<r.args.length;h++){var c=new n.ExpressionStatement(r.args[h],e);if(c.error instanceof i)throw c.error;u.push(c)}this.items=u}}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../filesystem"),s=t("../../IOInterface").getDefault();r.prototype.toString=function(){return this.formatExpr?"USING "+this.formatExpr.toString()+"; "+this.numberExpr.toString():this.items.join(", ")},r.prototype.toJSON=function(){var t=[];if(this.items)for(var e=0;e<this.items.length;e++)t.push(this.items[e].toJSON());return{format:this.formatExpr?this.formatExpr.toJSON():!1,number:this.numberExpr?this.numberExpr.toJSON():!1,items:t,noLine:this.noLine}},r.prototype.execute=function(t,e){if(this.formatExpr){var r=this.formatExpr.execute(t),n=this.numberExpr.execute(t);t.validate(r,"string"),t.validate(n,"number");var i=n.toString().split("."),a=i[0],u=i.length>1?i[1]:"",h=r.split("."),c=h[0],f=h.length>1?h[1]:"",p="",l="",d=a.length-c.length,m=a.substring(0>d?0:d);if(0>d){var g=-1*d;m=new Array(g+1).join(" ")+m}for(var y=0;y<c.length;y++){var x=c[y];p+="#"!==x?x:m[y]}var v=u.substring(0,f.length);if(v.length<f.length){var w=f.length-v.length;v+=new Array(w+1).join(" ")}for(var b=0;b<f.length;b++){var S=f[b];l+="#"!==S?S:v[b]}s.write(p+(l.length?"."+l:"")+"\n")}else{for(var E=[],O=0;O<this.items.length;O++){var I=this.items[O].execute(t);if("string"!=typeof I&&"number"!=typeof I&&!(I instanceof o.File&&0===O))throw new Error("Types mismatch");E.push(I)}if(E[0]instanceof o.File){var N=E[0];if("output"!==N.mode&&"append"!==N.mode)throw new Error("File not writable");return N.write(E.slice(1).join(" ")),void N.save(function(){e()})}s.write(E.join(" ")+(this.noLine?"":"\n"))}e()},e.exports=r},{"../../IOInterface":27,"../../filesystem":33,"../SyntaxError":41,"../statements":103}],74:[function(t,e){function r(){}r.prototype.execute=function(t,e){t.setPrivate("rnd_seed",Math.random()),e()},e.exports=r},{}],75:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<4)throw new i("RECT command requires 4 arguments");this.x1=e.args[0],this.y1=e.args[1],this.x2=e.args[2],this.y2=e.args[3],this.stroke=e.args.length>4?e.args[4]:!1}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){var t=[this.x1,this.y1,this.x2,this.y2];return this.stroke&&t.push(this.stroke),t.join(", ")},r.prototype.toJSON=function(){return{x1:this.x1.toJSON(),y1:this.y1.toJSON(),x2:this.x2.toJSON(),y2:this.y2.toJSON(),stroke:this.stroke?this.stroke.toJSON():!1}},r.prototype.execute=function(t,e){var r=this.x1.execute(t),n=this.y1.execute(t),i=this.x2.execute(t),s=this.y2.execute(t),a=this.stroke?this.stroke.execute(t):0;t.validate(r,"number"),t.validate(n,"number"),t.validate(i,"number"),t.validate(s,"number"),t.validate(a,"number"),o.write({command:"rect",args:{x1:r,y1:n,x2:i,y2:s,stroke:a}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],76:[function(t,e){function r(){}var n=t("../../IOInterface").get("draw");r.prototype.execute=function(t,e){var r=t.constants.ScreenWidth(),i=t.constants.ScreenHeight();if(i>r){var o=r;r=i,i=o}n.write({command:"setsize",args:{width:r,height:i}}),n.write({command:"locksize"}),e()},e.exports=r},{"../../IOInterface":27}],77:[function(t,e){function r(){}var n=t("../../IOInterface").get("draw");r.prototype.execute=function(t,e){var r=t.constants.ScreenWidth(),i=t.constants.ScreenHeight();
if(r>i){var o=r;r=i,i=o}n.write({command:"setsize",args:{width:r,height:i}}),n.write({command:"locksize"}),e()},e.exports=r},{"../../IOInterface":27}],78:[function(t,e){function r(){}r.prototype.execute=function(t,e){e()},e.exports=r},{}],79:[function(t,e){function r(){}r.prototype.execute=function(t,e){t.returnLabel(),e()},e.exports=r},{}],80:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<5)throw new i("RRECT command requires 5 arguments");this.x1=e.args[0],this.y1=e.args[1],this.x2=e.args[2],this.y2=e.args[3],this.radius=e.args[4],this.stroke=e.args.length>5?e.args[5]:!1}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){var t=[this.x1,this.y1,this.x2,this.y2,this.radius];return this.stroke&&t.push(this.stroke),t.join(", ")},r.prototype.toJSON=function(){return{x1:this.x1.toJSON(),y1:this.y1.toJSON(),x2:this.x2.toJSON(),y2:this.y2.toJSON(),radius:this.radius.toJSON(),stroke:this.stroke?this.stroke.toJSON():!1}},r.prototype.execute=function(t,e){var r=this.x1.execute(t),n=this.y1.execute(t),i=this.x2.execute(t),s=this.y2.execute(t),a=this.radius.execute(t),u=this.stroke?this.stroke.execute(t):0;t.validate(r,"number"),t.validate(n,"number"),t.validate(i,"number"),t.validate(s,"number"),t.validate(a,"number"),t.validate(u,"number"),o.write({command:"rrect",args:{x1:r,y1:n,x2:i,y2:s,radius:a,stroke:u}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],81:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<2)throw new i("SAVESPRITE command requires 2 arguments");this.id=e.args[0],this.fileName=e.args[1]}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../filesystem");r.prototype.toString=function(){return this.id+", "+this.fileName},r.prototype.toJSON=function(){return{id:this.id.toJSON(),fileName:this.fileName.toJSON()}},r.prototype.execute=function(t,e){var r=this.id.execute(t),n=this.fileName.execute(t);if(t.validate(r,"number"),t.validate(n,"string"),!t.private.sprites[r])throw new Error("Invalid sprite ID");var i=t.private.sprites[r],s=i.toDataUrl(),a=n.indexOf(":"),u="A";-1!==a&&(u=n.substring(0,a),n=n.substring(a+1)),o.drive(u,function(t){var r=t.open(n);r.clear(),r.write(s),r.save(),e()})},e.exports=r},{"../../filesystem":33,"../SyntaxError":41,"../statements":103}],82:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<3)throw new i("SHAPE command requires 3 arguments");this.pointsLength=e.args[0],this.pointsX=e.args[1],this.pointsY=e.args[2],this.stroke=e.args.length>3?e.args[3]:!1}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){var t=[this.pointsLength,this.pointsX,this.pointsY];return this.stroke&&t.push(this.stroke),t.join(", ")},r.prototype.toJSON=function(){return{pointsLength:this.pointsLength.toJSON(),pointsX:this.pointsX.toJSON(),pointsY:this.pointsY.toJSON(),stroke:this.stroke?this.stroke.toJSON():!1}},r.prototype.execute=function(t,e){var r=this.pointsLength.execute(t),n=this.pointsX.execute(t),i=this.pointsY.execute(t),s=this.stroke?this.stroke.execute(t):0;if(t.validate(r,"number"),!Array.isArray(n))throw new Error("Types mismatch");if(!Array.isArray(i))throw new Error("Types mismatch");if(r>n.length||r>i.length)throw new Error("Invalid array bounds");for(var a=[],u=0;r>u;u++){var h=n[u],c=i[u];t.validate(h,"number"),t.validate(c,"number"),a.push({x:h,y:c})}o.write({command:"shape",args:{points:a,stroke:s}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],83:[function(t,e){function r(t,e){if(this.duration=new n.ExpressionStatement(t,e),this.duration.error)throw this.duration.error}{var n=t("../statements");t("../SyntaxError")}r.prototype.toString=function(){return this.duration.toString()},r.prototype.toJSON=function(){return{duration:this.duration.toJSON()}},r.prototype.execute=function(t,e){var r=this.duration.execute(t);t.validate(r,"number"),setTimeout(function(){e()},1e3*r)},e.exports=r},{"../SyntaxError":41,"../statements":103}],84:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<3)throw new i("TCOLOR command requires 3 arguments");this.red=e.args[0],this.green=e.args[1],this.blue=e.args[2]}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){return[this.red,this.green,this.blue].join(", ")},r.prototype.toJSON=function(){return{r:this.red.toJSON(),g:this.green.toJSON(),b:this.blue.toJSON()}},r.prototype.execute=function(t,e){var r=this.red.execute(t),n=this.green.execute(t),i=this.blue.execute(t);t.validate(r,"number"),t.validate(n,"number"),t.validate(i,"number");var s=r,a=n,u=i;r>1&&(r/=255),n>1&&(n/=255),i>1&&(i/=255),r=Math.max(0,Math.min(r,1)),n=Math.max(0,Math.min(n,1)),i=Math.max(0,Math.min(i,1)),t.setConstant("TColorR",s),t.setConstant("TColorG",a),t.setConstant("TColorB",u),o.write({command:"tcolor",args:{r:r,g:n,b:i}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],85:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length>2)this.family=e.args[0],this.style=e.args[1],this.size=e.args[2];else if(e.args.length>1)this.familyOrStyle=e.args[0],this.size=e.args[1];else if(e.args.length>0){var r=e.args[0];"string"===r.child.type||r.child instanceof n.StringStatement?this.familyOrStyle=r:this.size=r}else this.reset=!0}var n=t("../statements"),i=(t("../SyntaxError"),t("../../IOInterface").get("draw")),o=["light","bold","italic"],s=["American Typewriter","AppleGothic","Arial","Arial Rounded","Courier","Courier New","Georgia","Helvetica","Marker Felt","Times","Trebuchet","Verdana","Zapfino"];r.prototype.toString=function(){var t=[];return this.family?t.push(this.family,this.style):this.familyOrStyle&&t.push(this.familyOrStyle),this.size&&t.push(this.size),t.join(", ")},r.prototype.toJSON=function(){return{reset:this.reset,family:this.family?this.family.toJSON():!1,style:this.style?this.style.toJSON():!1,size:this.size?this.size.toJSON():!1,familyOrStyle:this.familyOrStyle?this.familyOrStyle.toJSON():!1}},r.prototype.execute=function(t,e){var r=!1,n=!1,a=!1;if(this.reset)r="Zapfino",n="",a=14;else if(this.family)r=this.family.execute(t),n=this.style.execute(t).toLowerCase();else if(this.familyOrStyle){for(var u=this.familyOrStyle.execute(t),h=u.toLowerCase(),c=h.split(" "),f=!0,p=0;p<c.length;p++)if(-1===o.indexOf(c[p])){f=!1;break}f?n=h:r=u}if(this.size&&(a=this.size.execute(t)),r!==!1&&(t.validate(r,"string"),-1===s.indexOf(r)))throw new Error("Invalid font name");if(n!==!1){t.validate(n,"string"),n=n.trim();for(var l=n.split(" "),d=0;d<l.length;d++){var m=l[d].trim();if(m.length&&-1===o.indexOf(m))throw new Error("Invalid font style")}}a!==!1&&t.validate(a,"number"),i.write({command:"font",args:{family:r,style:n,height:a}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],86:[function(t,e){function r(t){var e=new n.ArgumentStatement(t);if(e.args.length<6)throw new i("TRIANGLE command requires 6 arguments");this.x1=e.args[0],this.y1=e.args[1],this.x2=e.args[2],this.y2=e.args[3],this.x3=e.args[4],this.y3=e.args[5],this.stroke=e.args.length>6?e.args[6]:!1}var n=t("../statements"),i=t("../SyntaxError"),o=t("../../IOInterface").get("draw");r.prototype.toString=function(){var t=[this.x1,this.y1,this.x2,this.y2,this.x3,this.y3];return this.stroke&&t.push(this.stroke),t.join(", ")},r.prototype.toJSON=function(){return{x1:this.x1.toJSON(),y1:this.y1.toJSON(),x2:this.x2.toJSON(),y2:this.y2.toJSON(),x3:this.x3.toJSON(),y3:this.y3.toJSON(),stroke:this.stroke?this.stroke.toJSON():!1}},r.prototype.execute=function(t,e){var r=this.x1.execute(t),n=this.y1.execute(t),i=this.x2.execute(t),s=this.y2.execute(t),a=this.x3.execute(t),u=this.y3.execute(t),h=this.stroke?this.stroke.execute(t):0;t.validate(r,"number"),t.validate(n,"number"),t.validate(i,"number"),t.validate(s,"number"),t.validate(a,"number"),t.validate(u,"number"),t.validate(h,"number"),o.write({command:"triangle",args:{x1:r,y1:n,x2:i,y2:s,x3:a,y3:u,stroke:h}}),e()},e.exports=r},{"../../IOInterface":27,"../SyntaxError":41,"../statements":103}],87:[function(t,e){function r(){}r.prototype.execute=function(t,e){e()},e.exports=r},{}],88:[function(t,e){function r(t,e){this.block=e}r.prototype.toJSON=function(){return{block:this.block.toJSON()}},r.prototype.execute=function(t,e){var r=this.block.references();if(!r.length)throw new Error("WEND without WHILE");t.cursor=r[0].start,e()},e.exports=r},{}],89:[function(t,e){function r(t,e){var r=new n.ArgumentStatement(t,{separator:!1});this.condition=r.args[0],this.block=e({start:"WHILE",end:"WEND"})}var n=t("../statements"),i=t("../../util"),o=i.setImmediate;r.prototype.toString=function(){return this.condition.toString()},r.prototype.toJSON=function(){return{condition:this.condition.toJSON(),block:this.block.toJSON()}},r.prototype.execute=function(t,e){var r=this.condition.execute(t);r?o(e):(t.cursor=this.block.end+1,e())},e.exports=r},{"../../util":123,"../statements":103}],90:[function(t,e,r){r.dim=t("./DimCommand"),r.end=t("./EndCommand"),r.gosub=t("./GosubCommand"),r.goto=t("./GotoCommand"),r.input=t("./InputCommand"),r.print=t("./PrintCommand"),r.randomize=t("./RandomizeCommand"),r.return=t("./ReturnCommand"),r.pause=t("./PauseCommand"),r.sleep=t("./SleepCommand"),r.cls=t("./ClsCommand"),r.play=t("./PlayCommand"),r.volume=t("./VolumeCommand"),r.playspeed=t("./PlayspeedCommand"),r.color=t("./ColorCommand"),r.tcolor=t("./TcolorCommand"),r.bcolor=t("./BcolorCommand"),r.begindraw=t("./BegindrawCommand"),r.enddraw=t("./EnddrawCommand"),r.point=t("./PointCommand"),r.line=t("./LineCommand"),r.rect=t("./RectCommand"),r.rrect=t("./RrectCommand"),r.circle=t("./CircleCommand"),r.ellipse=t("./EllipseCommand"),r.shape=t("./ShapeCommand"),r.triangle=t("./TriangleCommand"),r.piechart=t("./PiechartCommand"),r.drawtext=t("./DrawtextCommand"),r.textfont=t("./TextfontCommand"),r.loadsprite=t("./LoadspriteCommand"),r.drawsprite=t("./DrawspriteCommand"),r.savesprite=t("./SavespriteCommand"),r.retina=t("./RetinaCommand"),r.antialias=t("./AntialiasCommand"),r.lockorientation=t("./LockorientationCommand"),r.requireportrait=t("./RequireportraitCommand"),r.requirelandscape=t("./RequirelandscapeCommand"),r.accelcalibrate=t("./AccelcalibrateCommand"),r.open=t("./OpenCommand"),r.close=t("./CloseCommand"),r.while=t("./WhileCommand"),r.wend=t("./WendCommand"),r.if=t("./IfCommand"),r.else=t("./ElseCommand"),r.endif=t("./EndifCommand"),r.for=t("./ForCommand"),r.next=t("./NextCommand")},{"./AccelcalibrateCommand":42,"./AntialiasCommand":43,"./BcolorCommand":44,"./BegindrawCommand":45,"./CircleCommand":46,"./CloseCommand":47,"./ClsCommand":48,"./ColorCommand":49,"./DimCommand":50,"./DrawspriteCommand":51,"./DrawtextCommand":52,"./EllipseCommand":53,"./ElseCommand":54,"./EndCommand":55,"./EnddrawCommand":56,"./EndifCommand":57,"./ForCommand":58,"./GosubCommand":59,"./GotoCommand":60,"./IfCommand":61,"./InputCommand":62,"./LineCommand":63,"./LoadspriteCommand":64,"./LockorientationCommand":65,"./NextCommand":66,"./OpenCommand":67,"./PauseCommand":68,"./PiechartCommand":69,"./PlayCommand":70,"./PlayspeedCommand":71,"./PointCommand":72,"./PrintCommand":73,"./RandomizeCommand":74,"./RectCommand":75,"./RequirelandscapeCommand":76,"./RequireportraitCommand":77,"./RetinaCommand":78,"./ReturnCommand":79,"./RrectCommand":80,"./SavespriteCommand":81,"./ShapeCommand":82,"./SleepCommand":83,"./TcolorCommand":84,"./TextfontCommand":85,"./TriangleCommand":86,"./VolumeCommand":87,"./WendCommand":88,"./WhileCommand":89}],91:[function(t,e,r){function n(t){try{for(var e={},r=[],n=new a,u=t.split("\n"),h=0;h<u.length;h++)try{var c=i(u[h].trim(),h,e,!1,n);if(c instanceof s)throw c;if(c.error instanceof s)throw c.error;r[h]=c}catch(f){throw new s(f.message+" on line "+(h+1))}return new o(r,e,n)}catch(f){return{error:f}}}function i(t,e,r,n,o){function a(t){return u.findPositions(t,[{start:"(",end:")"},{start:'"',end:'"'}])}if(t=t.trim(),""===t)return new m;if(0===t.indexOf("'")||"REM"===t.toUpperCase()||0===t.toUpperCase().indexOf("REM "))return new f(t.substring(t.indexOf(" ")).trim());var h;h=a(t);var y=u.indexOfOutside(t,"'",0,h);if(-1!==y&&(t=t.substring(0,y).trim(),h=a(t)),":"===t[t.length-1]){var x=t.substring(0,t.length-1);return r[x]=e,new m}0===t.indexOf("END IF")&&(t="ENDIF");var v=u.indexOfOutside(t," ",0,h);if(-1===v){{parseInt(t)}if(!n&&!isNaN(parseInt(t)))return r[t]=e,new m}var w,b;if(-1!==v){if(w=t.substring(0,v).trim(),b=t.substring(v).trim(),!n&&!isNaN(parseInt(w)))return r[w]=e,i(b,e,r,!0,o);if("="===b[0])return new c(new l(w),new d(b.substring(1).trim()));var S=w.indexOf("=");if(-1!==S){var E=w+" "+b,O=E.substring(0,S).trim(),I=E.substring(S+1).trim();return new c(new l(O),new d(I))}}else{w=t,b="";var N=w.indexOf("=");if(-1!==N){var C=w.substring(0,N),_=w.substring(N+1);return new c(new l(C),new d(_))}var L=w.indexOf("(");if(-1!==L){var A=w.indexOf(")");if(-1===A)return new s("Unexpected open bracket");var J=w.substring(0,L);if(!isNaN(parseInt(J)))return new s("Expected function name");var k=w.substring(L+1,A);return new g(J,k)}}return w=w.toUpperCase(),new p(w.toLowerCase(),b,o,e)}var o=t("./AbstractSyntaxTree"),s=t("./SyntaxError"),a=t("./Block"),u=t("../util"),h=t("./statements"),c=h.AssignmentStatement,f=h.CommentStatement,p=h.CommandStatement,l=h.VariableStatement,d=h.ExpressionStatement,m=h.EmptyStatement,g=h.FunctionStatement;r.Block=a,r.commands=t("./commands"),r.statements=h,r.AbstractSyntaxTree=t("./AbstractSyntaxTree"),r.SyntaxError=t("./SyntaxError"),r.parse=n,r.parseLine=i},{"../util":123,"./AbstractSyntaxTree":38,"./Block":40,"./SyntaxError":41,"./commands":90,"./statements":103}],92:[function(t,e){function r(t,e,r){if(e=e||{},this.value=t,this.flags={},this.args=[],this.options=e,"undefined"==typeof e.parse&&(e.parse=!0),"undefined"==typeof e.separator&&(e.separator=","),"undefined"==typeof e.parseArgs&&(e.parseArgs=!0),e.parse){if(e.flags)for(var o=!0;o;){var s=t.indexOf(" ");-1===s&&(s=t.length);var a=t.substring(0,s).trim().toUpperCase();-1!==e.flags.indexOf(a)?(this.flags[a]=!0,t=t.substring(s).trim()):o=!1}this.rawArgs=t,t=t.trim();var u=[t];if(e.separator)if(t.length){var h=i.findPositions(t,[{start:'"',end:'"'},{start:"(",end:")"}]);u=i.splitOutside(t,e.separator,h)}else u=[];for(var c=0;c<u.length;c++){var f=u[c].trim();e.parseArgs&&(f=new n.ExpressionStatement(f,r)),this.args.push(f)}}}var n=t("./"),i=t("../../util");r.prototype.toJSON=function(){return{type:"ArgumentStatement",value:this.value,flags:this.flags,args:this.args,options:this.options}},e.exports=r},{"../../util":123,"./":103}],93:[function(t,e){function r(t,e){this.variable=t,this.expression=e}r.prototype.toString=function(){return this.variable.toString()+" = "+this.expression.toString()},r.prototype.toJSON=function(){return{type:"AssignmentStatement",variable:this.variable.toJSON(),expression:this.expression.toJSON()}},r.prototype.execute=function(t){t.setVariable(this.variable,this.expression)},e.exports=r},{}],94:[function(t,e){function r(t,e,r,o){if(this.name=t,this.args=e,!n[t])throw new i("Unknown command: "+t);this.command=new n[t](e,r.create(o))}var n=t("../commands"),i=t("../SyntaxError");r.prototype.toString=function(){var t=this.command.toString();return this.name.toUpperCase()+("[object Object]"===t?"":" "+t)},r.prototype.toJSON=function(){return{type:"CommandStatement",name:this.name,command:this.command.toJSON?this.command.toJSON():{}}},r.prototype.execute=function(t){return t.callCommand(this.command)},e.exports=r},{"../SyntaxError":41,"../commands":90}],95:[function(t,e){function r(t){this.text=t}r.prototype.toString=function(){return"' "+this.text},r.prototype.toJSON=function(){return{type:"CommentStatement",text:this.text}},r.prototype.execute=function(){},e.exports=r},{}],96:[function(t,e){function r(){}r.prototype.toString=function(){return""},r.prototype.toJSON=function(){return{type:"EmptyStatement"}},r.prototype.execute=function(){},e.exports=r},{}],97:[function(t,e){function r(t,e){if(this.child=n(t,e?e.line:"unknown"),this.child instanceof s)throw this.child;if(this.child.error)throw this.child.error}function n(t){t=t.trim();for(var e=t.toLowerCase(),r=u.findPositions(e,[{start:'"',end:'"'},{start:"(",end:")"}]),c=0;c<a.length;c++){var f=a[c],p=Object.keys(f),l=u.findLastOutside(e,p,e.length,r);if(-1!==l.index){var d=t.substring(0,l.index).trim();if("-"===l.found||"+"===l.found){var m=u.findLast(d,h);if(-1!==m.index){var g=d.substring(m.index+m.found.length).trim();if(!g.length)continue}}var y=n(d),x=n(t.substring(l.index+l.found.length)),v=f[l.found];if(!v)throw new s("Unknown operator");return new v(y,x)}}var w=t.indexOf("(");if(-1!==w){var b=t.lastIndexOf(")");if(-1===b)throw new s("Expected end bracket in "+t);var S=t.substring(w+1,b).trim(),E=t.substring(0,w).trim();if(E.length)return new o.FunctionStatement(E,S);var O=t.substring(b+1).trim();if(O.length)throw new s("Unexpected expression");return n(S)}return i(t)}function i(t){if("#"===t[0]){var e=t.substring(1);return isNaN(parseInt(e))?new s("Unexpected hash"):new o.PointerStatement(e)}var r=-1!==t.indexOf('"');if(r){if('"'!==t[0]||'"'!==t[t.length-1])return new s("Unexpected quote");var n=t.slice(1,t.length-1);return new o.StringStatement(n)}var i=parseFloat(t);return isNaN(i)?new o.VariableStatement(t):new o.NumberStatement(i)}for(var o=t("./"),s=t("../SyntaxError"),a=t("./operators"),u=t("../../util"),h=[],c=0;c<a.length;c++)h=h.concat(Object.keys(a[c]));r.prototype.toString=function(){return this.child.toString()},r.prototype.toJSON=function(){return{type:"ExpressionStatement",child:this.child.toJSON()}},r.prototype.execute=function(t){if(this.error)throw this.error;return this.child.execute(t)},e.exports=r},{"../../util":123,"../SyntaxError":41,"./":103,"./operators":121}],98:[function(t,e){function r(t,e){"$"===t[t.length-1]?(this.type="string",this.name=t.substring(0,t.length-1)):(this.type="number",this.name=t);var r=i.findPositions(e,[{start:'"',end:'"'},{start:"(",end:")"}]),o=i.splitOutside(e,",",r);this.args=[];for(var s=0;s<o.length;s++)this.args.push(new n.ExpressionStatement(o[s].trim()))}var n=t("./"),i=t("../../util");r.prototype.toString=function(){for(var t=[],e=0;e<this.args.length;e++)t.push(this.args[e].toString());return this.name+("string"===this.type?"$":"")+"("+t.join(", ")+")"},r.prototype.toJSON=function(){return{type:"FunctionStatement",name:this.name,varType:this.type,args:this.args}},r.prototype.execute=function(t){for(var e=[],r=0;r<this.args.length;r++){var n=this.args[r];if(n.error)throw n.error;e.push(n.execute(t))}return t.callFunction(this,e)},e.exports=r},{"../../util":123,"./":103}],99:[function(t,e){function r(t){this.value=t}r.prototype.toString=function(){return this.value.toString()},r.prototype.toJSON=function(){return{type:"NumberStatement",value:this.value}},r.prototype.execute=function(){return this.value},e.exports=r},{}],100:[function(t,e){function r(t){this.id=t}r.prototype.toString=function(){return"#"+this.id},r.prototype.toJSON=function(){return{type:"PointerStatement",id:this.id}},r.prototype.execute=function(t){return t.getPointer(this)},e.exports=r},{}],101:[function(t,e){function r(t){this.value=t}r.prototype.toString=function(){return'"'+this.value+'"'},r.prototype.toJSON=function(){return{type:"StringStatement",value:this.value}},r.prototype.execute=function(){return this.value},e.exports=r},{}],102:[function(t,e){function r(t){var e=t.indexOf("(");if(-1!==e){var r=t.indexOf(")");if(-1===r)throw new n("Expected end bracket");var o=t.substring(0,e),s=t.substring(e+1,r).trim(),a=new i.ArgumentStatement(s);t=o,this.isArray=!0,this.dimensions=a.args}else this.isArray=!1;"$"===t[t.length-1]?(this.type="string",this.name=t.substring(0,t.length-1)):(this.type="number",this.name=t)}var n=t("../SyntaxError"),i=t("./");r.prototype.toString=function(){var t=this.name+("string"===this.type?"$":"");return this.isArray&&(t+="("+this.dimensions.join(", ")+")"),t},r.prototype.toJSON=function(){return{type:"VariableStatement",name:this.name,varType:this.type,dimensions:this.dimensions}},r.prototype.execute=function(t){return t.getVariable(this)},e.exports=r},{"../SyntaxError":41,"./":103}],103:[function(t,e,r){r.operators=t("./operators"),r.ArgumentStatement=t("./ArgumentStatement"),r.AssignmentStatement=t("./AssignmentStatement"),r.CommandStatement=t("./CommandStatement"),r.CommentStatement=t("./CommentStatement"),r.EmptyStatement=t("./EmptyStatement"),r.ExpressionStatement=t("./ExpressionStatement"),r.FunctionStatement=t("./FunctionStatement"),r.NumberStatement=t("./NumberStatement"),r.PointerStatement=t("./PointerStatement"),r.StringStatement=t("./StringStatement"),r.VariableStatement=t("./VariableStatement")},{"./ArgumentStatement":92,"./AssignmentStatement":93,"./CommandStatement":94,"./CommentStatement":95,"./EmptyStatement":96,"./ExpressionStatement":97,"./FunctionStatement":98,"./NumberStatement":99,"./PointerStatement":100,"./StringStatement":101,"./VariableStatement":102,"./operators":121}],104:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" + "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:"+",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){var e=this.lexpr.execute(t),r=this.rexpr.execute(t);return e?e+r:r},e.exports=r},{}],105:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" AND "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:" and ",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){return this.lexpr.execute(t)&&this.rexpr.execute(t)?1:0},e.exports=r},{}],106:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" BAND "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:" band ",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){var e=this.lexpr.execute(t),r=this.rexpr.execute(t);return t.validate(e,"number"),t.validate(r,"number"),e&r},e.exports=r},{}],107:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" / "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:"/",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){var e=this.lexpr.execute(t),r=this.rexpr.execute(t);if("number"!=typeof e||"number"!=typeof r)throw new Error("Types mismatch");return e/r},e.exports=r},{}],108:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" = "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:"=",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){return this.lexpr.execute(t)==this.rexpr.execute(t)?1:0},e.exports=r},{}],109:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" > "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:">",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){return this.lexpr.execute(t)>this.rexpr.execute(t)?1:0},e.exports=r},{}],110:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" >= "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:">=",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){return this.lexpr.execute(t)>=this.rexpr.execute(t)?1:0},e.exports=r},{}],111:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" < "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:"<",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){return this.lexpr.execute(t)<this.rexpr.execute(t)?1:0},e.exports=r},{}],112:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" <= "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:"<=",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){return this.lexpr.execute(t)<=this.rexpr.execute(t)?1:0},e.exports=r},{}],113:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" * "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:"*",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){var e=this.lexpr.execute(t),r=this.rexpr.execute(t);if("number"!=typeof e||"number"!=typeof r)throw new Error("Types mismatch");return e*r},e.exports=r},{}],114:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return"NOT "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:"not ",rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){return this.rexpr.execute(t)?0:1},e.exports=r},{}],115:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return"BNOT "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:"bnot ",rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){var e=this.rexpr.execute(t);return t.validate(e,"number"),~e},e.exports=r},{}],116:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" OR "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:" or ",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){return this.lexpr.execute(t)||this.rexpr.execute(t)?1:0},e.exports=r},{}],117:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" BOR "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:" bor ",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){var e=this.lexpr.execute(t),r=this.rexpr.execute(t);return t.validate(e,"number"),t.validate(r,"number"),e|r},e.exports=r},{}],118:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" ^ "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:"^",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){var e=this.lexpr.execute(t),r=this.rexpr.execute(t);if("number"!=typeof e||"number"!=typeof r)throw new Error("Types mismatch");return Math.pow(e,r)},e.exports=r},{}],119:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" - "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:"-",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){var e=this.lexpr.execute(t),r=this.rexpr.execute(t);if(!e&&"number"==typeof r)return-1*r;if("number"!=typeof e||"number"!=typeof r)throw new Error("Types mismatch");return e-r},e.exports=r},{}],120:[function(t,e){function r(t,e){this.lexpr=t,this.rexpr=e}r.prototype.toString=function(){return this.lexpr.toString()+" BXOR "+this.rexpr.toString()},r.prototype.toJSON=function(){return{type:" bxor ",lexpr:this.lexpr.toJSON(),rexpr:this.rexpr.toJSON()}},r.prototype.execute=function(t){var e=this.lexpr.execute(t),r=this.rexpr.execute(t);return t.validate(e,"number"),t.validate(r,"number"),e^r},e.exports=r},{}],121:[function(t,e){e.exports=[{" and ":t("./AndComparator")," or ":t("./OrComparator")},{"not ":t("./NotComparator"),"=":t("./EqualComparator"),">":t("./GtComparator"),">=":t("./GteComparator"),"<":t("./LtComparator"),"<=":t("./LteComparator")},{"+":t("./AdditionOperator"),"-":t("./SubtractionOperator")," band ":t("./AndOperator")," bor ":t("./OrOperator")," bxor ":t("./XorOperator")," xor ":t("./XorOperator"),"bnot ":t("./NotOperator")},{"/":t("./DivisionOperator"),"*":t("./MultiplicationOperator")},{"^":t("./PowerOperator")}]},{"./AdditionOperator":104,"./AndComparator":105,"./AndOperator":106,"./DivisionOperator":107,"./EqualComparator":108,"./GtComparator":109,"./GteComparator":110,"./LtComparator":111,"./LteComparator":112,"./MultiplicationOperator":113,"./NotComparator":114,"./NotOperator":115,"./OrComparator":116,"./OrOperator":117,"./PowerOperator":118,"./SubtractionOperator":119,"./XorOperator":120}],122:[function(t,e,r){function n(t){t=t||{};var e=t.prompt||"> ",r=t.eval||i,n=new h,s=new f,a=new c([],{},s);o(n,a,e,e,-1,r)}function i(t,e,r,n,i){try{if("."===t[0]){var o=t.substring(1),s=o.indexOf(" "),h="";switch(-1!==s&&(h=o.substring(s+1).trim(),o=o.substring(0,s).trim()),o){case"break":r.root.splice(e._blockStart),e._blockStart=!1,i();break;case"clear":e._blockStart=!1,e.root=r.root=[],e.labels=r.labels={},e.options.cursorStart=0,e.gosubs=[],e.stringVars={},e.numberVars={},e.pointers={},i();break;case"exit":break;case"help":a.write(".break       - Clear the current multi-line expression\n"),a.write(".clear       - Reset the current context and clear the current multi-line expression\n"),a.write(".exit        - Close the I/O stream, causing the REPL to exit\n"),a.write(".help        - Show this list of special commands\n"),a.write(".load <file> - Load a file into the session\n"),a.write(".save <file> - Save the current session\n"),i();break;case"load":u.readFile(h,{encoding:"utf8"},function(t,n){try{if(t)throw t;for(var o=n.split("\n"),s=0;s<o.length;s++){var u=o[s],h=p.parseLine(u,r.root.length,r.labels,!1,r.manager);if(h instanceof d)throw h;if(h.error)throw h.error;r.root.push(h)}r.manager.parse(r),r.execute(e,i)}catch(t){a.write(t+"\n"),i()}});break;case"save":var c=r.toString();u.writeFile(h,c,function(t){t&&a.write(t+"\n"),i()});break;default:throw new Error("Unknown REPL command")}return}var f=p.parseLine(t,r.root.length,r.labels,!1,r.manager);if(f instanceof d)throw f;if(f.error)throw f.error;r.root.push(f),r.manager.parse(r),"number"==typeof e._blockStart?(e.options.cursorStart=e._blockStart,e._blockStart=!1):e.options.cursorStart=n,r.execute(e,i)}catch(m){var g=m.message;m instanceof d&&-1!==g.indexOf("without")?("number"!=typeof e._blockStart&&(e._blockStart=r.root.length-1),i("... ")):(a.write(m+"\n"),r.root.pop(),r.root.push(new l.EmptyStatement),i())}}function o(t,e,r,n,i,s){a.question(r,function(r){s(r,t,e,-1===i?e.root.length:i,function(r,i){o(t,e,r||n,n,"undefined"==typeof i?-1:i,s)})})}for(var s=t("./IOInterface"),a=s.getDefault(),u=t("fs"),h=t("./executor/ExecutionContext"),c=t("./parser/AbstractSyntaxTree"),f=t("./parser/Block/index"),p=t("./parser/index"),l=t("./parser/statements/index"),d=t("./parser/SyntaxError"),m=t("./parser/commands/index"),g=Object.keys(m),y=[],x=0;x<g.length;x++)y.push(g[x].toUpperCase());r.start=n},{"./IOInterface":27,"./executor/ExecutionContext":28,"./parser/AbstractSyntaxTree":38,"./parser/Block/index":40,"./parser/SyntaxError":41,"./parser/commands/index":90,"./parser/index":91,"./parser/statements/index":103,fs:1}],123:[function(t,e,r){(function(t){function e(t,e,r){for(var n=t.length+1,i="",o=0;o<e.length;o++){var s=e[o],a=t.indexOf(s,r);-1!==a&&n>a&&(n=a,i=s)}return n===t.length+1?{index:-1,found:""}:{index:n,found:i}}function n(t,e,r){for(var n=-1,i="",o=0;o<e.length;o++){var s=e[o],a=t.lastIndexOf(s,r);a>n&&(n=a,i=s)}return{index:n,found:i}}function i(t,r,n,i){var o,s={start:0,end:n?n-1:-1};do o=e(t,r,s.end+1);while(-1!==o.index&&(s=c(o.index,i)));return o}function o(t,e,r,i){var o,s={start:r?r+1:t.length+1,end:0};do o=n(t,e,s.start-1);while(-1!==o.index&&(s=c(o.index,i)));return o}function s(t,e,r,n){var i,o={start:0,end:r?r-1:-1};do i=t.indexOf(e,o.end+1);while(-1!==i&&(o=c(i,n)));return i}function a(t,e,r,n){var i,o={start:r?r+1:t.length+1,end:0};
do i=t.lastIndexOf(e,o.start-1);while(-1!==i.index&&(o=c(i.index,n)));return i}function u(t,e,r){for(var n=[],i="",o=0;o<t.length;o++){i+=t[o];var s=c(o,r);!s&&f(i,e)&&(n.push(i.substring(0,i.length-e.length)),i="")}return n.push(i),n}function h(t,e){for(var r=0,n=-1,i=[],o={},s="",a=0;a<t.length;a++){s+=t[a];for(var u=0;u<e.length;u++){var h=e[u];r>0&&f(s,h.end)?(r--,0===r&&n===u&&(o.end=a-h.end.length+1,n=-1,s="",i.push(o),o={})):f(s,h.start)&&(r++,1===r&&-1===n&&(o={startChar:h.start,endChar:h.end,start:a},n=u,s=""))}}return i}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];if(t>=n.start&&t<=n.end)return n}return!1}function f(t,e){return t.length<e.length?!1:t===e?!0:t.lastIndexOf(e)===t.length-e.length}function p(t,e,r){for(t=String(t),r=r||" ";t.length<e;)t+=r;return t}function l(t,e){arguments.length<2&&(e=t,t={});for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function d(){}r.findNext=e,r.findLast=n,r.findNextOutside=i,r.findLastOutside=o,r.indexOfOutside=s,r.lastIndexOfOutside=a,r.splitOutside=u,r.findPositions=h,r.inPosition=c,r.endsWith=f,r.pad=p,r.shallowClone=l,r.setImmediate=function(){return"undefined"!=typeof setImmediate?setImmediate:function(t){setTimeout(t,0)}}(),r.now=function(){return t.hrtime?function(){var e=t.hrtime();return e[0]+e[1]/1e9}:function(){var t=window.performance.now();return t/1e3}}(),d.prototype.valueOf=function(){return this.value},r.DeferredValue=d}).call(this,t("_process"))},{_process:10}]},{},[26]);
//# sourceMappingURL=bundle.min.js.map